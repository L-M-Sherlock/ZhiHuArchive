<meta charset="UTF-8">
如何和网友们一起愉快地合作翻译？我推荐 Paratranz + DeepL。
<p>记得上次写原创……还是在上次？哈哈开个玩笑，不知道大家有没有注意到，我最近发布翻译文章的速度快了不少？质量还变高了？本文我就讲讲如何提高<b>业余</b>翻译效率。</p><p>面向读者：有一定编程基础、用爱发电的业余翻译者</p><h2>背景</h2><p>在 18 年，我就用业余时间搞翻译了，虽然我英语不是很好，但还是做了几十万字的翻译。返回去看那些翻译，质量惨不忍睹。痛定思痛之后，我打算召集一些志愿者，一起翻译，互相校对，兼顾翻译质量和效率。</p><p>一开始我们采用 GitHub 作为协作平台，用 git 管理翻译项目，用 pull request 来合并翻译。不过由于 git 对非程序员朋友十分不友好，导致翻译《<a href="https://zhuanlan.zhihu.com/p/394795804" class="internal">我们如何才能开发出变革性的思想工具？ </a>》这篇长达 4 万字的文章，花了我们 3 个人将近 2.5 个月的时间。</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-9259ec25f0e6fd5bad7bd8c2202ab40b_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1248" data-rawheight="836" class="origin_image zh-lightbox-thumb" width="1248" data-original="https://pic2.zhimg.com/v2-9259ec25f0e6fd5bad7bd8c2202ab40b_720w.jpg?source=3af55fa1"></figure><p>其中还不乏因为 git 比对差异不符预期，导致未翻译内容覆盖了已翻译的内容。</p><p>由于这些问题，协作翻译的摩擦太大，使协作带来的收益不足以覆盖协作的成本。最终使得翻译项目停滞。</p><h2>起因</h2><p>在群里抱怨翻译太慢之后，有群友向我推荐了 Paratranz 这个翻译平台</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-63dd6554b944b5a82885a648ea88062e_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="352" data-rawheight="431" class="content_image" width="352"></figure><a href="https://www.zhihu.com/question/453300590/answer/1866580713" data-draft-node="block" data-draft-type="link-card" data-image="https://pica.zhimg.com/v2-5ca65ffe63268ace4e32edbc3b420f27_qhd.jpg?source=3af55fa1" data-image-width="1283" data-image-height="734" class="internal">大家是如何看待有些译员在翻译文章时，先机翻，然后在机翻的基础上进行修改和润色？机翻是否可取呢？</a><p>这个平台的翻译界面功能很全：</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-1659e2d07b69b36b25f6e06c1a1e62b6_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1919" data-rawheight="969" class="origin_image zh-lightbox-thumb" width="1919" data-original="https://pic2.zhimg.com/v2-1659e2d07b69b36b25f6e06c1a1e62b6_720w.jpg?source=3af55fa1"></figure><p>而且还是国人开发的，本来用于翻译 P 社 mod：</p><a href="http://link.zhihu.com/?target=https%3A//paratranz.cn/about" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">ParaTranz</a><p> 我一看，感觉针不戳，就开始上手了。</p><h2>创建项目</h2><p>首先，我们先按流程来，创建一个项目：</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-61303bf6c2792c52c030398bd637c483_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1916" data-rawheight="560" class="origin_image zh-lightbox-thumb" width="1916" data-original="https://pic1.zhimg.com/v2-61303bf6c2792c52c030398bd637c483_720w.jpg?source=3af55fa1"></figure><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-14f3980c63109040b5ded49365402630_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1201" data-rawheight="942" class="origin_image zh-lightbox-thumb" width="1201" data-original="https://pic1.zhimg.com/v2-14f3980c63109040b5ded49365402630_720w.jpg?source=3af55fa1"></figure><p>这些内容都按要求填写就行了，所属游戏填「其他」，至于选用什么许可协议，可以看这篇介绍：</p><a href="https://zhuanlan.zhihu.com/p/20641764" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/1983cf8d5a7c7aaf9f18ded88ac2239c_qhd.jpg?source=3af55fa1" data-image-width="680" data-image-height="257" class="internal">漠伦：“知识共享”（CC协议）简单介绍</a><p>建好了项目后，就可以在「我的」标签下面找到自己创建的项目了：</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-47444d5f29d03520015f7f696673438a_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1205" data-rawheight="557" class="origin_image zh-lightbox-thumb" width="1205" data-original="https://pic3.zhimg.com/v2-47444d5f29d03520015f7f696673438a_720w.jpg?source=3af55fa1"></figure><h2>添加翻译</h2><p>有了项目，没有待翻译的文本，我们还不能开始翻译。由于这个平台主要是用于翻译游戏 mod 内的描述文本，用来翻译文章属于歪门邪道的用法，这里我们就需要使用平台翻译的通用格式：.csv 文件</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-72e876f5614f5bff485197d3a0b2cc6b_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="862" data-rawheight="848" class="origin_image zh-lightbox-thumb" width="862" data-original="https://pic2.zhimg.com/v2-72e876f5614f5bff485197d3a0b2cc6b_720w.jpg?source=3af55fa1"></figure><p>格式如图所示，第一列为索引值，第二列是原文，第三列是译文。</p><p>可能有人要问了，你不是搞翻译协作么？怎么上传的时候就有译文了？</p><p>别急，你可能还会问，把要翻译的文章搞成这种格式不累么？</p><p>没事儿，这些都可以自动化，为了提高翻译效率，我写了个 Python 脚本来实现格式转换和自动机翻：</p><div class="highlight"><pre><code class="language-python3"><span></span><span class="kn">import</span> <span class="nn">deepl</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="k">import</span> <span class="n">deepl_key</span>

<span class="n">translator</span> <span class="o">=</span> <span class="n">deepl</span><span class="o">.</span><span class="n">Translator</span><span class="p">(</span><span class="n">deepl_key</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">countspaces</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="s1">' '</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>


<span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="n">save</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Source'</span><span class="p">,</span> <span class="s1">'Translation'</span><span class="p">])</span>
    <span class="n">queries</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">space</span> <span class="o">=</span> <span class="s1">' '</span> <span class="o">*</span> <span class="n">countspaces</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">translator</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">target_lang</span><span class="o">=</span><span class="s1">'ZH'</span><span class="p">)</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">text</span>
            <span class="k">if</span> <span class="n">trans</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
                <span class="n">trans</span> <span class="o">=</span> <span class="n">query</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="n">save</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Source'</span><span class="p">:</span> <span class="p">[</span><span class="n">query</span><span class="p">],</span> <span class="s1">'Translation'</span><span class="p">:</span> <span class="p">[</span><span class="n">space</span> <span class="o">+</span> <span class="n">trans</span><span class="p">]})],</span>
                             <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="n">save</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="s1">'./machine_tranz/</span><span class="si">{filename}</span><span class="s1">.csv'</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">trans_files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">'source'</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">trans_files</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="s1">'source/</span><span class="si">{filename}</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">translate</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">f</span><span class="s1">'source/</span><span class="si">{filename}</span><span class="s1">'</span><span class="p">,</span> <span class="n">f</span><span class="s1">'./src_fin/</span><span class="si">{filename}</span><span class="s1">'</span><span class="p">)</span>
</code></pre></div><p><br></p><p>思路很简单</p><ul><li>先把想要翻译的文章贴到一个文本文件里面</li><li>再用 Python 脚本处理，遍历原文的所有段落</li><li>然后对每个段落调用 deepL 的翻译接口</li><li>将返回的译文和原文一起存到 pandas 的表中</li><li>按照平台要求的格式保存成 .csv 文件</li><li>上传至 Paratranz 平台</li></ul><blockquote>注：DeepL 也可以替换为其他机翻接口</blockquote><p>这样讲有点抽象，下面拿一篇文章演示一下</p><h3>图片演示</h3><p>原文：</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-98bc164e33c7ef30d2adcbeabab5693d_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="775" data-rawheight="907" class="origin_image zh-lightbox-thumb" width="775" data-original="https://pic2.zhimg.com/v2-98bc164e33c7ef30d2adcbeabab5693d_720w.jpg?source=3af55fa1"></figure><p>复制到 typora，并保存到待处理文件的目录下</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-f7f0f61cef501f16e85992fcf49c4031_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1256" data-rawheight="940" class="origin_image zh-lightbox-thumb" width="1256" data-original="https://pic1.zhimg.com/v2-f7f0f61cef501f16e85992fcf49c4031_720w.jpg?source=3af55fa1"></figure><p>运行脚本：</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-77c2c87d61a2ca25e6440890115f2570_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1204" data-rawheight="798" class="origin_image zh-lightbox-thumb" width="1204" data-original="https://pic3.zhimg.com/v2-77c2c87d61a2ca25e6440890115f2570_720w.jpg?source=3af55fa1"></figure><p>最终文件：</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-18ee3ea6578072584c96800caa0e44a6_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1188" data-rawheight="776" class="origin_image zh-lightbox-thumb" width="1188" data-original="https://pica.zhimg.com/v2-18ee3ea6578072584c96800caa0e44a6_720w.jpg?source=3af55fa1"></figure><p>上传平台：</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-9e133b86d152b58cf6753ea780a765bb_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1350" data-rawheight="546" class="origin_image zh-lightbox-thumb" width="1350" data-original="https://pic4.zhimg.com/v2-9e133b86d152b58cf6753ea780a765bb_720w.jpg?source=3af55fa1"></figure><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-4bc67282e554464b495487100f95655b_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1377" data-rawheight="550" class="origin_image zh-lightbox-thumb" width="1377" data-original="https://pic2.zhimg.com/v2-4bc67282e554464b495487100f95655b_720w.jpg?source=3af55fa1"></figure><figure data-size="normal"><img src="https://pica.zhimg.com/v2-40871f3916e9d66ba0c53d0f4c81362c_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1301" data-rawheight="682" class="origin_image zh-lightbox-thumb" width="1301" data-original="https://pic3.zhimg.com/v2-40871f3916e9d66ba0c53d0f4c81362c_720w.jpg?source=3af55fa1"></figure><p>查看效果：</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-dde83ce3a730fca7b713d72dd535ec3e_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1918" data-rawheight="752" class="origin_image zh-lightbox-thumb" width="1918" data-original="https://pic1.zhimg.com/v2-dde83ce3a730fca7b713d72dd535ec3e_720w.jpg?source=3af55fa1"></figure><p>前前后后大概花不到一分钟就能搞定，如果同时添加多个文件，效率还能更高。</p><h2>开始协作</h2><p>有了待翻译的文本，还有已经预先上传的机器翻译，接下来只需要邀请你的朋友加入项目就能愉快地开始协作了~</p><p>具体的协作教程，已经有人写过了，这里就不赘述了：</p><a href="https://zhuanlan.zhihu.com/p/376818812" data-draft-node="block" data-draft-type="link-card" class="internal">ShirahaneSuoh：汉化组翻译指南节选 - 如何使用云平台</a><h2>发布译文</h2><p>和朋友们吭哧吭哧翻译了好多文章，现在想把译文整合一下发布出去？总不能一段一段复制出来吧？这里简单说说怎么把翻译好的文章处理成易于阅读的格式。</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-dcf0de8202b0de408a96485bd921ce37_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1349" data-rawheight="662" class="origin_image zh-lightbox-thumb" width="1349" data-original="https://pica.zhimg.com/v2-dcf0de8202b0de408a96485bd921ce37_720w.jpg?source=3af55fa1"></figure><p>首先需要到下载这里，将翻译成果下载下来，解压一下，会得到以下文件：</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-33b28834725c0ac72f7ddfc9e247da4d_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="518" data-rawheight="548" class="origin_image zh-lightbox-thumb" width="518" data-original="https://pica.zhimg.com/v2-33b28834725c0ac72f7ddfc9e247da4d_720w.jpg?source=3af55fa1"></figure><p>点开一看，和我们上传的格式一致，除了译文部分已经被更新成我们人工润色和校对后的内容</p><figure data-size="normal"><img src="https://pica.zhimg.com/v2-0844eaee9a95a2a60dd2f67b452ba0ed_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="534" data-rawheight="641" class="origin_image zh-lightbox-thumb" width="534" data-original="https://pica.zhimg.com/v2-0844eaee9a95a2a60dd2f67b452ba0ed_720w.jpg?source=3af55fa1"></figure><p>这里我也是写了一个脚本自动处理：</p><div class="highlight"><pre><code class="language-python3"><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>

    <span class="n">trans_files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">'./utf8/tools-for-thought'</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">trans_files</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">f</span><span class="s1">'./utf8/tools-for-thought/</span><span class="si">{filename}</span><span class="s1">'</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'source'</span><span class="p">,</span> <span class="s1">'target'</span><span class="p">]</span>
        <span class="n">text</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="s1">'./proofread/</span><span class="si">{filename[:-4]}</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="s1">'target'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
</code></pre></div><p><br></p><p>最终处理的结果：</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-af0c74d44b8c70a3efba862cc62689a3_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1182" data-rawheight="920" class="origin_image zh-lightbox-thumb" width="1182" data-original="https://pic3.zhimg.com/v2-af0c74d44b8c70a3efba862cc62689a3_720w.jpg?source=3af55fa1"></figure><p>然后把这个文本贴到任何你想要发布的平台即可！</p><hr><h2>结语</h2><p>本文初衷就是分享一下自己是如何用 Paratranz 和 DeepL 提高业余翻译效率的，如果能帮到各位，十分荣幸。</p><p>用 CAT 的专业翻译请轻喷，谢谢~</p><p><br></p><p>叶峻峣</p><p>2021 年 9 月 20 日</p>