<meta charset="UTF-8">
SuperMemo 自动备份
<div><h2>更新</h2><p>2021 年 10 月 28 日：推翻重写，不再使用 BitShelter，改用 Kopia 来备份。不再需要单独划分磁盘，并且设置非常好理解。</p><h2>警告</h2><p>千万不要用百度网盘自动备份或者坚果云同步之类的在线同步备份软件，很可能会搞错 SuperMemo 的文件版本，导致卡片丢失或者数据损坏。</p><h2><b>引入</b></h2><p>SuperMemo 只有手动备份功能，使用者难免会忘记及时备份，当自己误删后想要回滚，才发现上次备份已经是几个月前，这期间的工作全部木大。为了预防这种情况出现，我建议日常使用 SuperMemo 的朋友掌握一下自动备份的方法，以防不测。</p><h2><b>效果预览</b></h2><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic2.zhimg.com/v2-b36b2bc5e89cd944c7bcd2ef701a174d_b.jpg" data-caption="" src="https://pic2.zhimg.com/v2-b36b2bc5e89cd944c7bcd2ef701a174d_r.jpg" data-rawheight="548" data-rawwidth="1046" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='1046' height='548'&gt;&lt;/svg&gt;" width="1046"/></figure><h2><b>准备工作</b></h2><p>下载 Kopia 并安装</p><p><a class="external" href="https://ghproxy.com/https%3A//github.com/kopia/kopia/releases/download/v0.9.4/KopiaUI-Setup-0.9.4.exe" rel="nofollow noreferrer" target="_blank"><span>https://</span><span>ghproxy.com/https://git</span><span>hub.com/kopia/kopia/releases/download/v0.9.4/KopiaUI-Setup-0.9.4.exe</span><span></span></a></p><p>打开 Kopia 并点击 Filesystem，我们这次就做本地备份。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-2d1677aa654bbefa15f6119faba30f3a_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-2d1677aa654bbefa15f6119faba30f3a_r.jpg" data-rawheight="619" data-rawwidth="842" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='842' height='619'&gt;&lt;/svg&gt;" width="842"/></figure><p>随手找一个<b>空文件夹（最好新建一个）</b>来当备份目录：</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic4.zhimg.com/v2-692a350bd6850d5b01dfcbc08936242b_b.jpg" data-caption="" src="https://pic4.zhimg.com/v2-692a350bd6850d5b01dfcbc08936242b_r.jpg" data-rawheight="317" data-rawwidth="533" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='533' height='317'&gt;&lt;/svg&gt;" width="533"/></figure><p>设置一下备份加密密码</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic4.zhimg.com/v2-71a50f5841cb1f58712fd1fff854dba3_b.jpg" data-caption="" src="https://pic4.zhimg.com/v2-71a50f5841cb1f58712fd1fff854dba3_r.jpg" data-rawheight="429" data-rawwidth="839" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='839' height='429'&gt;&lt;/svg&gt;" width="839"/></figure><p>好了，接下来就可以开始设置备份计划了</p><h2>备份设置</h2><p>点 New Snapshot，开始设置</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-33b34ca8b74364d97919d843690cc668_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-33b34ca8b74364d97919d843690cc668_r.jpg" data-rawheight="295" data-rawwidth="833" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='833' height='295'&gt;&lt;/svg&gt;" width="833"/></figure><p>输入你的 sm18 路径，点一下 estimate 看看对不对。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-a79481a0dde96e02032308b46d3f54cc_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-a79481a0dde96e02032308b46d3f54cc_r.jpg" data-rawheight="611" data-rawwidth="822" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='822' height='611'&gt;&lt;/svg&gt;" width="822"/></figure><p>然后点 snapshot now 就可以手动备份了。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-cb9df5ab04136416255db28b7bf82ec0_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-cb9df5ab04136416255db28b7bf82ec0_r.jpg" data-rawheight="600" data-rawwidth="821" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='821' height='600'&gt;&lt;/svg&gt;" width="821"/></figure><p>接下来我们改一下自动备份的设置，先到 Policies 点一下 edit</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-e31ccb355d33c1c111d2a130871dbc5e_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-e31ccb355d33c1c111d2a130871dbc5e_r.jpg" data-rawheight="350" data-rawwidth="843" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='843' height='350'&gt;&lt;/svg&gt;" width="843"/></figure><p>retention 这里我设置为 4 3 2 1，意思就是保持最新的 4 份，最近 3 小时的 3 份，最近两天的 2 份，最近一周的 1 份。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-7721f10395116a77fecbdec658a7e52e_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-7721f10395116a77fecbdec658a7e52e_r.jpg" data-rawheight="437" data-rawwidth="803" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='803' height='437'&gt;&lt;/svg&gt;" width="803"/></figure><p>Scheduling 这边的 interval 设置为 300，就是 5 分钟备份一次。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic2.zhimg.com/v2-a84104d0bbfe5031fb4a6a2833d8077d_b.jpg" data-caption="" src="https://pic2.zhimg.com/v2-a84104d0bbfe5031fb4a6a2833d8077d_r.jpg" data-rawheight="457" data-rawwidth="820" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='820' height='457'&gt;&lt;/svg&gt;" width="820"/></figure><p>最后点击 Save Policy 完成设置。</p><h2><b>恭喜</b></h2><p>我们已经完成了每 5 分钟备份一次的设置。Kopia 会保留最新的 4 份备份，也就是 5 分钟前、10 分钟前、15 分钟前、20分钟前。还有最近 3 小时，1 小时前、2 小时前、3 小时前。还有 1 天前、2 天前和一周前。有这么多兜底，妈妈再也不怕我 SuperMemo 崩溃啦！</p><p>如何恢复备份？先点击路径</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-062493b48d1f3c4624c826898bd71df6_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-062493b48d1f3c4624c826898bd71df6_r.jpg" data-rawheight="349" data-rawwidth="588" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='588' height='349'&gt;&lt;/svg&gt;" width="588"/></figure><p>再选择一份备份</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic2.zhimg.com/v2-38979ee3db8b4895ca652ec74e8f1391_b.jpg" data-caption="" src="https://pic2.zhimg.com/v2-38979ee3db8b4895ca652ec74e8f1391_r.jpg" data-rawheight="1012" data-rawwidth="1372" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='1372' height='1012'&gt;&lt;/svg&gt;" width="1372"/></figure><p>然后点 restore</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic4.zhimg.com/v2-9e338b109d11d2228ce1bbaf67d3605b_b.jpg" data-caption="" src="https://pic4.zhimg.com/v2-9e338b109d11d2228ce1bbaf67d3605b_r.jpg" data-rawheight="228" data-rawwidth="429" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='429' height='228'&gt;&lt;/svg&gt;" width="429"/></figure><p>填一下要恢复到哪个路径（建议先把你现在的 sm18 文件夹里面的东西都删掉），然后勾选一下 overwrite 覆盖，再 begin restore 即可。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-2dbfd3cf1d2fd5f7474d0cd368d44340_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-2dbfd3cf1d2fd5f7474d0cd368d44340_r.jpg" data-rawheight="521" data-rawwidth="520" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='520' height='521'&gt;&lt;/svg&gt;" width="520"/></figure><h2>补充说明</h2><p>SuperMemo 正在运行时，Kopia 可能会备份失败，所以如果你要进行高危操作，最好先关闭 SuperMemo，然后点击 Snapshot Now 手动备份。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-754845629238a9b1d776e6a91e611c6c_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-754845629238a9b1d776e6a91e611c6c_r.jpg" data-rawheight="416" data-rawwidth="1984" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='1984' height='416'&gt;&lt;/svg&gt;" width="1984"/></figure><p>另外最好将 Kopia 设置为开机自动启动。可以参考：</p><a class="LinkCard new" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/v2-9961132443806a940198d5e71bef2748_180x120.jpg" data-image-height="1080" data-image-width="1920" data-text="愿君学习狂热：如何设置让软件开机自启动？三步搞定！" href="https://zhuanlan.zhihu.com/p/265076894" target="_blank"><span><span></span><span></span></span><span></span></a><p></p></div>