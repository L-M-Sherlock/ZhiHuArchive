<meta charset="UTF-8">
Anki 复习数据清洗与分析(附源码和数据)
<div><p>最近开始测试一些间隔重复算法，需要收集一些复习数据，如果大家感兴趣，可以按照本文的教程分析你的复习数据。</p><h2>获取原始数据</h2><h3>数据库查看工具</h3><p>Anki 的数据库用的是 SQLite，推荐使用 DB Browser for SQLite 来查看和导出复习数据，支持 Win 和 Mac。</p><p>下载地址：</p><a class="LinkCard new" data-draft-node="block" data-draft-type="link-card" data-text="Downloads - DB Browser for SQLite" href="https://link.zhihu.com/?target=http%3A//www.sqlitebrowser.org/dl/" target="_blank"><span><span></span><span></span></span><span></span></a><h3>打开 Anki 数据库</h3><p>下载并安装好上面这个工具之后，按照以下步骤即可打开 Anki 数据库（记得先把 Anki 关了）：</p><ol><li>打开 DB Browser，文件 &gt; 打开数据库</li></ol><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic2.zhimg.com/v2-47141dfd16a70f8167a71458911ce305_b.jpg" data-caption="" src="https://pic2.zhimg.com/v2-47141dfd16a70f8167a71458911ce305_r.jpg" data-rawheight="235" data-rawwidth="626" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='626' height='235'&gt;&lt;/svg&gt;" width="626"/></figure><ol><li>找到你 Anki 本地数据库的位置，通常这个位置是 <code>C:\Users\你电脑的用户名\AppData\Roaming\Anki2\你 Anki 本地配置的名称\</code> </li></ol><p>记得把右下角这个改成所有文件，因为 Anki 的数据库后缀不是 db 也不是 sqlite。</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-5efc00c8818bcbdd8cef43835c4d74b8_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-5efc00c8818bcbdd8cef43835c4d74b8_r.jpg" data-rawheight="468" data-rawwidth="740" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='740' height='468'&gt;&lt;/svg&gt;" width="740"/></figure><p>改好后如果你找到的位置是对的，那么就能看到 <code>collection.anki2</code> 的文件了</p><p>2. 提取数据</p><p>打开后转到执行 SQL，输入以下 SQL 语句：</p><div><pre><code><span>SELECT</span> <span>id</span><span>,</span> <span>cid</span><span>,</span> <span>ease</span><span>,</span> <span>lastIvl</span><span>,</span> <span>type</span>
<span>FROM</span> <span>revlog</span>
<span>WHERE</span> <span>type</span> <span>!=</span> <span>2</span>
<span>;</span></code></pre></div><p>然后点</p><figure><img class="content_image lazy" data-actualsrc="https://pic4.zhimg.com/v2-d7ac423ef8c5db79e516eff96f0ec10f_b.jpg" data-caption="" data-rawheight="76" data-rawwidth="259" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='259' height='76'&gt;&lt;/svg&gt;" width="259"/></figure><p>就能得到以下结果</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-fc747a7ae56a272c845f9054d801e5ba_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-fc747a7ae56a272c845f9054d801e5ba_r.jpg" data-rawheight="699" data-rawwidth="590" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='590' height='699'&gt;&lt;/svg&gt;" width="590"/></figure><p>再点击</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic2.zhimg.com/v2-9443ee112755973af29f7e26f9482fb1_b.jpg" data-caption="" src="https://pic2.zhimg.com/v2-9443ee112755973af29f7e26f9482fb1_r.jpg" data-rawheight="169" data-rawwidth="441" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='441' height='169'&gt;&lt;/svg&gt;" width="441"/></figure><p>就能将数据导出成 csv 格式，用 excel 打开就能看到这样的数据：</p><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic4.zhimg.com/v2-d8f2f2a856b19e7001312618101cf007_b.jpg" data-caption="" src="https://pic4.zhimg.com/v2-d8f2f2a856b19e7001312618101cf007_r.jpg" data-rawheight="539" data-rawwidth="557" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='557' height='539'&gt;&lt;/svg&gt;" width="557"/></figure><p>里面没有关于卡片内容的敏感数据，大家可以安心分享。</p><p>欢迎将你的 .csv 文件发送到我的邮箱地址：jarrett.ye@outlook.com，</p><p>或者在专栏读者群(869469893)分享，也可以发送你的网盘分享链接。</p><p>PS: 当然，也可以导出带学习数据的 apkg 文件发送给我，如果你有调整复习参数，请详细说明。</p><p>作为回报，我会将以下分析数据反馈给你。（如果你有想要分析的其它指标，也可以跟我提，如果基于目前的数据可以分析，我也会反馈给你）</p><h2>Anki 数据分析</h2><h3>不同反馈对应的记录数量</h3><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-624b389de77179d3b302576f52bf7eee_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-624b389de77179d3b302576f52bf7eee_r.jpg" data-rawheight="360" data-rawwidth="1086" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='1086' height='360'&gt;&lt;/svg&gt;" width="1086"/></figure><h3>总体遗忘/保留情况</h3><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-2d4cfc6bc4cbe384a9bd2210fba09322_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-2d4cfc6bc4cbe384a9bd2210fba09322_r.jpg" data-rawheight="413" data-rawwidth="729" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='729' height='413'&gt;&lt;/svg&gt;" width="729"/></figure><h3>不同间隔下的复习记录数量</h3><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-7b653027cde82cfe13d0b47255c00e74_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-7b653027cde82cfe13d0b47255c00e74_r.jpg" data-rawheight="395" data-rawwidth="735" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='735' height='395'&gt;&lt;/svg&gt;" width="735"/></figure><h3>不同间隔区间对应的保留率</h3><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-1f3013fe4b60bd1c2e182bd67e4db0f2_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-1f3013fe4b60bd1c2e182bd67e4db0f2_r.jpg" data-rawheight="566" data-rawwidth="1092" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='1092' height='566'&gt;&lt;/svg&gt;" width="1092"/></figure><h3>不同复习次数对应的保留率</h3><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic3.zhimg.com/v2-5c4e8b0428c91a332fb3af31f39351b6_b.jpg" data-caption="" src="https://pic3.zhimg.com/v2-5c4e8b0428c91a332fb3af31f39351b6_r.jpg" data-rawheight="454" data-rawwidth="727" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='727' height='454'&gt;&lt;/svg&gt;" width="727"/></figure><h3>不同累计遗忘次数对应的记录数量</h3><figure><img class="origin_image zh-lightbox-thumb lazy" data-actualsrc="https://pic1.zhimg.com/v2-62048b3b6fbf33595ce8b8357111df0c_b.jpg" data-caption="" src="https://pic1.zhimg.com/v2-62048b3b6fbf33595ce8b8357111df0c_r.jpg" data-rawheight="435" data-rawwidth="726" data-size="normal" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='726' height='435'&gt;&lt;/svg&gt;" width="726"/></figure><p>还有一些其它的指标，如果你有任何建议或者意见，欢迎留言。</p><p>另外，以上代码和我自己的复习数据都开源在我的 GitHub 仓库：</p><a class="LinkCard new" data-draft-node="block" data-draft-type="link-card" data-text="L-M-Sherlock / anki_revlog_analysis" href="https://github.com/L-M-Sherlock/anki_revlog_analysis" target="_blank"><span><span></span><span></span></span><span></span></a><p>如果想要自己分析可以直接下载源码运行。</p><p>感谢大家的支持！</p><p><br/></p><p>2020 年 12 月 15 日</p><p>叶峻峣</p></div>