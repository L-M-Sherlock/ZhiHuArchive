<meta charset="UTF-8">
Anki 复习数据清洗与分析(附源码和数据)
<p>最近开始测试一些间隔重复算法，需要收集一些复习数据，如果大家感兴趣，可以按照本文的教程分析你的复习数据。</p><h2>获取原始数据</h2><h3>数据库查看工具</h3><p>Anki 的数据库用的是 SQLite，推荐使用 DB Browser for SQLite 来查看和导出复习数据，支持 Win 和 Mac。</p><p>下载地址：</p><a href="http://link.zhihu.com/?target=http%3A//www.sqlitebrowser.org/dl/" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">Downloads - DB Browser for SQLite</a><h3>打开 Anki 数据库</h3><p>下载并安装好上面这个工具之后，按照以下步骤即可打开 Anki 数据库（记得先把 Anki 关了）：</p><ol><li>打开 DB Browser，文件 &gt; 打开数据库</li></ol><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-47141dfd16a70f8167a71458911ce305_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="626" data-rawheight="235" class="origin_image zh-lightbox-thumb" width="626" data-original="https://pic2.zhimg.com/v2-47141dfd16a70f8167a71458911ce305_720w.jpg?source=3af55fa1"></figure><ol><li>找到你 Anki 本地数据库的位置，通常这个位置是 <code>C:\Users\你电脑的用户名\AppData\Roaming\Anki2\你 Anki 本地配置的名称\</code> </li></ol><p>记得把右下角这个改成所有文件，因为 Anki 的数据库后缀不是 db 也不是 sqlite。</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-5efc00c8818bcbdd8cef43835c4d74b8_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="740" data-rawheight="468" class="origin_image zh-lightbox-thumb" width="740" data-original="https://pic2.zhimg.com/v2-5efc00c8818bcbdd8cef43835c4d74b8_720w.jpg?source=3af55fa1"></figure><p>改好后如果你找到的位置是对的，那么就能看到 <code>collection.anki2</code> 的文件了</p><p>2. 提取数据</p><p>打开后转到执行 SQL，输入以下 SQL 语句：</p><div class="highlight"><pre><code class="language-sql"><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">ease</span><span class="p">,</span> <span class="n">lastIvl</span><span class="p">,</span> <span class="k">type</span>
<span class="k">FROM</span> <span class="n">revlog</span>
<span class="k">WHERE</span> <span class="k">type</span> <span class="o">!=</span> <span class="mi">2</span>
<span class="p">;</span>
</code></pre></div><p>然后点</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-d7ac423ef8c5db79e516eff96f0ec10f_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="259" data-rawheight="76" class="content_image" width="259"></figure><p>就能得到以下结果</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-fc747a7ae56a272c845f9054d801e5ba_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="590" data-rawheight="699" class="origin_image zh-lightbox-thumb" width="590" data-original="https://pic2.zhimg.com/v2-fc747a7ae56a272c845f9054d801e5ba_720w.jpg?source=3af55fa1"></figure><p>再点击</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-9443ee112755973af29f7e26f9482fb1_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="441" data-rawheight="169" class="origin_image zh-lightbox-thumb" width="441" data-original="https://pic1.zhimg.com/v2-9443ee112755973af29f7e26f9482fb1_720w.jpg?source=3af55fa1"></figure><p>就能将数据导出成 csv 格式，用 excel 打开就能看到这样的数据：</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-d8f2f2a856b19e7001312618101cf007_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="557" data-rawheight="539" class="origin_image zh-lightbox-thumb" width="557" data-original="https://pic3.zhimg.com/v2-d8f2f2a856b19e7001312618101cf007_720w.jpg?source=3af55fa1"></figure><p>里面没有关于卡片内容的敏感数据，大家可以安心分享。</p><p>欢迎将你的 .csv 文件发送到我的邮箱地址：jarrett.ye@outlook.com，</p><p>或者在专栏读者群(869469893)分享，也可以发送你的网盘分享链接。</p><p>PS: 当然，也可以导出带学习数据的 apkg 文件发送给我，如果你有调整复习参数，请详细说明。</p><p>作为回报，我会将以下分析数据反馈给你。（如果你有想要分析的其它指标，也可以跟我提，如果基于目前的数据可以分析，我也会反馈给你）</p><h2>Anki 数据分析</h2><h3>不同反馈对应的记录数量</h3><figure data-size="normal"><img src="https://pica.zhimg.com/v2-624b389de77179d3b302576f52bf7eee_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1086" data-rawheight="360" class="origin_image zh-lightbox-thumb" width="1086" data-original="https://pic2.zhimg.com/v2-624b389de77179d3b302576f52bf7eee_720w.jpg?source=3af55fa1"></figure><h3>总体遗忘/保留情况</h3><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-2d4cfc6bc4cbe384a9bd2210fba09322_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="729" data-rawheight="413" class="origin_image zh-lightbox-thumb" width="729" data-original="https://pic3.zhimg.com/v2-2d4cfc6bc4cbe384a9bd2210fba09322_720w.jpg?source=3af55fa1"></figure><h3>不同间隔下的复习记录数量</h3><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-7b653027cde82cfe13d0b47255c00e74_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="735" data-rawheight="395" class="origin_image zh-lightbox-thumb" width="735" data-original="https://pica.zhimg.com/v2-7b653027cde82cfe13d0b47255c00e74_720w.jpg?source=3af55fa1"></figure><h3>不同间隔区间对应的保留率</h3><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-1f3013fe4b60bd1c2e182bd67e4db0f2_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1092" data-rawheight="566" class="origin_image zh-lightbox-thumb" width="1092" data-original="https://pica.zhimg.com/v2-1f3013fe4b60bd1c2e182bd67e4db0f2_720w.jpg?source=3af55fa1"></figure><h3>不同复习次数对应的保留率</h3><figure data-size="normal"><img src="https://pica.zhimg.com/v2-5c4e8b0428c91a332fb3af31f39351b6_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="727" data-rawheight="454" class="origin_image zh-lightbox-thumb" width="727" data-original="https://pic1.zhimg.com/v2-5c4e8b0428c91a332fb3af31f39351b6_720w.jpg?source=3af55fa1"></figure><h3>不同累计遗忘次数对应的记录数量</h3><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-62048b3b6fbf33595ce8b8357111df0c_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="726" data-rawheight="435" class="origin_image zh-lightbox-thumb" width="726" data-original="https://pic2.zhimg.com/v2-62048b3b6fbf33595ce8b8357111df0c_720w.jpg?source=3af55fa1"></figure><p>还有一些其它的指标，如果你有任何建议或者意见，欢迎留言。</p><p>另外，以上代码和我自己的复习数据都开源在我的 GitHub 仓库：</p><a href="http://link.zhihu.com/?target=https%3A//github.com/L-M-Sherlock/anki_revlog_analysis" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">L-M-Sherlock / anki_revlog_analysis</a><p>如果想要自己分析可以直接下载源码运行。</p><p>感谢大家的支持！</p><p><br></p><p>2020 年 12 月 15 日</p><p>叶峻峣</p>