【硬核】Anki2.1 打印卡片——可以打印还能自测，这样的问答卡片你喜欢吗？
<p>更新：感谢 circlestar 更新并汉化了插件</p><a href="https://zhuanlan.zhihu.com/p/159263417" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/v2-446d455c7ce3c7ee2ab875793dd63d55_qhd.jpg?source=3af55fa1" data-image-width="818" data-image-height="508" class="internal">circlestar：anki打印卡片插件（export deck to html）汉化+修bug</a><hr><p>阅读须知：本文暂时只介绍问答卡片的打印方法（实际上是因为暂时不支持填空类型卡片）</p><p>效果：可以带图片、可以保留文本样式，保存为pdf后打印即可。并且问题和答案分为左右两列，方便对折自测。</p><figure data-size="small"><img src="https://pic2.zhimg.com/v2-658ae60ecc11fdb813604bc0aaf3c124_720w.jpg?source=3af55fa1" data-caption="" data-size="small" data-rawwidth="1110" data-rawheight="775" class="origin_image zh-lightbox-thumb" width="1110" data-original="https://pic3.zhimg.com/v2-658ae60ecc11fdb813604bc0aaf3c124_720w.jpg?source=3af55fa1"></figure><figure data-size="small"><img src="https://pica.zhimg.com/v2-eb3d9a13826724f214db5c5508a7e01e_720w.jpg?source=3af55fa1" data-caption="" data-size="small" data-rawwidth="1214" data-rawheight="868" class="origin_image zh-lightbox-thumb" width="1214" data-original="https://pic1.zhimg.com/v2-eb3d9a13826724f214db5c5508a7e01e_720w.jpg?source=3af55fa1"></figure><p>工具：Anki插件Export deck to HTML、文本编辑器、浏览器</p><hr><h2>第一步：安装插件</h2><p>插件页面</p><a href="http://link.zhihu.com/?target=https%3A//ankiweb.net/shared/info/1897277426" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">Export deck to HTML</a><p>插件怎么安装就不要问我了，百度一下你就知道。</p><h2>第二步：筛选卡片</h2><p>由于这个插件一次只能导出同一个笔记类型的卡片，所以如果你的牌组内混杂了不同类型的卡片，需要筛选出来移动到一个新的牌组中。</p><p>这里以 Anki 高考牌组为例</p><figure data-size="small"><img src="https://pic2.zhimg.com/v2-54adf96d12342159ad37447d4ebc75f0_720w.jpg?source=3af55fa1" data-caption="" data-size="small" data-rawwidth="1434" data-rawheight="657" class="origin_image zh-lightbox-thumb" width="1434" data-original="https://pica.zhimg.com/v2-54adf96d12342159ad37447d4ebc75f0_720w.jpg?source=3af55fa1"></figure><p>搜索方法：在对应的牌组后面加上 "note:问答(Anki高考)" 即可筛选出该牌组中所有的 问答(Anki高考) 卡片。</p><p>将选中的卡片更换牌组，这里以 分子与细胞 为例</p><figure data-size="small"><img src="https://pic2.zhimg.com/v2-b67af2d3c8ab0450d7730bf7f0f3629b_720w.jpg?source=3af55fa1" data-caption="" data-size="small" data-rawwidth="793" data-rawheight="647" class="origin_image zh-lightbox-thumb" width="793" data-original="https://pic4.zhimg.com/v2-b67af2d3c8ab0450d7730bf7f0f3629b_720w.jpg?source=3af55fa1"></figure><h2>第三步：设置导出格式</h2><p>点击主页面-左上角-工具-Export deck to html</p><figure data-size="small"><img src="https://pic2.zhimg.com/v2-f1d9d5b449182eecdd6669fc9731158f_720w.jpg?source=3af55fa1" data-caption="" data-size="small" data-rawwidth="869" data-rawheight="577" class="origin_image zh-lightbox-thumb" width="869" data-original="https://pic2.zhimg.com/v2-f1d9d5b449182eecdd6669fc9731158f_720w.jpg?source=3af55fa1"></figure><p>选择对应的牌组</p><figure data-size="small"><img src="https://pica.zhimg.com/v2-70cb4ec7df77025a1455ce1f1ad27d72_720w.jpg?source=3af55fa1" data-caption="" data-size="small" data-rawwidth="748" data-rawheight="789" class="origin_image zh-lightbox-thumb" width="748" data-original="https://pic2.zhimg.com/v2-70cb4ec7df77025a1455ce1f1ad27d72_720w.jpg?source=3af55fa1"></figure><p>向 CSS 栏填入</p><div class="highlight"><pre><code class="language-css"><span></span><span class="nt">table</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="n">verdana</span><span class="p">,</span><span class="n">arial</span><span class="p">,</span><span class="kc">sans-serif</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span><span class="mi">11</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span><span class="mh">#333333</span><span class="p">;</span>
    <span class="k">border-width</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#666666</span><span class="p">;</span>
    <span class="k">border-collapse</span><span class="p">:</span> <span class="kc">collapse</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">th</span> <span class="p">{</span>
    <span class="k">border-width</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">border-style</span><span class="p">:</span> <span class="kc">solid</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#666666</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#dedede</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">td</span> <span class="p">{</span>
    <span class="k">border-width</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">border-style</span><span class="p">:</span> <span class="kc">solid</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#666666</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffffff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">img</span> <span class="p">{</span>
    <span class="k">max-width</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>向 html 栏填入</p><div class="highlight"><pre><code class="language-html"><span></span><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{问题}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{答案}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</code></pre></div><p>然后 Save，可以保存导出样式便于多次使用。最后点击 Export，导出成一个 html 文件。</p><h2>第四步：后处理</h2><p>用文本编辑器打开 html 文件（系统默认用浏览器，这里要右键选择编辑）</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-d6369d25e46db1f63093604505f6b3eb_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="453" data-rawheight="591" class="origin_image zh-lightbox-thumb" width="453" data-original="https://pic1.zhimg.com/v2-d6369d25e46db1f63093604505f6b3eb_720w.jpg?source=3af55fa1"></figure><p>然后找到文本中的 &lt;body&gt; 标签，在其下一行加入 &lt;table&gt;</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-5f7d00f330c18165d318513a7c566a44_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="487" data-rawheight="375" class="origin_image zh-lightbox-thumb" width="487" data-original="https://pic3.zhimg.com/v2-5f7d00f330c18165d318513a7c566a44_720w.jpg?source=3af55fa1"></figure><p>然后找到 &lt;/body&gt; 同理，在其上一行加入 &lt;/table&gt;</p><p>PS：嫌麻烦直接把body替换成table也可以</p><h2>第五步：打印</h2><p>这时候再用浏览器打开编辑好的 html 文件，右键后点击 Print</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-cc71548c122506b902e01cf043960ba4_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1885" data-rawheight="810" class="origin_image zh-lightbox-thumb" width="1885" data-original="https://pic3.zhimg.com/v2-cc71548c122506b902e01cf043960ba4_720w.jpg?source=3af55fa1"></figure><p>这里可以保存为 pdf，如果你的电脑有连打印机也可以直接打印。</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-2ad978f919c9f3174b559cb78c6f8584_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1482" data-rawheight="916" class="origin_image zh-lightbox-thumb" width="1482" data-original="https://pic3.zhimg.com/v2-2ad978f919c9f3174b559cb78c6f8584_720w.jpg?source=3af55fa1"></figure><hr><h2>总结</h2><p>本方法原理是利用插件，将卡片字段通过 html 和 css 重新组织为表格，然后导出后另存为 pdf 便于打印。根据不同的笔记模板，只需要制定对应的 html 和 css 即可。</p><h2>可能遇上的问题</h2><p>如果出现类似下面的错误，请看看你是否将 html 中的「问题」和「答案」改成你自己卡片模板对应的字段名称。</p><div class="highlight"><pre><code class="language-text"><span></span>Anki 2.1.20 (47a1bf8b) Python 3.8.1 Qt 5.12.6 PyQt 5.12.3
Platform: Windows 10
Flags: frz=True ao=True sv=1
Add-ons, last update check: 2021-02-20 11:44:42

Caught exception:
Traceback (most recent call last):
  File "lib\site-packages\anki\notes.py", line 144, in _fieldOrd
KeyError: '问题'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\adminster\AppData\Roaming\Anki2\addons21\1897277426\ExportDeckToHtml.py", line 193, in _on_accept
    value = card.note()[field[2:-2]]
  File "lib\site-packages\anki\notes.py", line 149, in __getitem__
  File "lib\site-packages\anki\notes.py", line 146, in _fieldOrd
KeyError: '问题'
</code></pre></div><h2>补充</h2><p>如果有卡片内含有 mathjax 格式的公式，请在第四步中继续添加以下代码至末尾：</p><div class="highlight"><pre><code class="language-js"><span></span><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/x-mathjax-config"</span><span class="o">&gt;</span>
<span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">processSectionDelay</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
<span class="nx">messageStyle</span><span class="o">:</span><span class="s2">"none"</span><span class="p">,</span>
<span class="nx">showProcessingMessages</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
<span class="nx">tex2jax</span><span class="o">:</span><span class="p">{</span>
<span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[[</span><span class="s1">'\\('</span><span class="p">,</span><span class="s1">'\\)'</span><span class="p">]],</span>
<span class="nx">processEscapes</span><span class="o">:</span><span class="kc">true</span>
<span class="p">}</span>
<span class="p">});</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG-full"</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</code></pre></div><p>然后打开html后等待渲染即可，代码参考了《<a href="https://zhuanlan.zhihu.com/p/53776780" class="internal">ACRL：使用MathJax在AnkiDroid上显示数学公式，化学方程式</a>》的评论区，非常感谢。</p><p>效果：</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-0d43b285e6c7e6056a8715d3a5040121_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="968" data-rawheight="649" class="origin_image zh-lightbox-thumb" width="968" data-original="https://pic2.zhimg.com/v2-0d43b285e6c7e6056a8715d3a5040121_720w.jpg?source=3af55fa1"></figure><h2>再次补充</h2><p>其实填空卡片也能打印，不过暂时无法做出填空的效果。篇幅所限，下次再说。</p><p>2020/5/12 更新：后续来了</p><a href="https://zhuanlan.zhihu.com/p/138240220" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/v2-f09e0949e8e9e726a24b03437f5c1d95_qhd.jpg?source=3af55fa1" data-image-width="2400" data-image-height="1350" class="internal">叶峻峣：【硬核】Anki2.1 打印卡片(续)——关于填空卡片转生成为复习提纲的那档事</a><h2>再再再次补充（感谢 <a class="member_mention" href="http://www.zhihu.com/people/a1fd216a0b1a8410d505c3ef3eb42b14" data-hash="a1fd216a0b1a8410d505c3ef3eb42b14" data-hovercard="p$b$a1fd216a0b1a8410d505c3ef3eb42b14">@不忘初心</a> 提供沙雕版教程）</h2><p>这里有位同学遇到了如下的问题</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-fc448d80bada2c306ed47db8050d3511_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="437" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic3.zhimg.com/v2-fc448d80bada2c306ed47db8050d3511_720w.jpg?source=3af55fa1"></figure><p>思考一下傻逼翻了什么罪</p><p>A. 没有认真阅读题干罪</p><p>B. 没有认真阅读材料罪</p><p>C. 没有认真阅读文章罪</p><p>无论你选哪一个，根据《关于对傻逼的处罚条例》，罪名都是成立的，我们来阅读一下总结部分（当你在阅读语文或者英语阅读时看末段也是很重要的帮你找出主旨的方法）</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-93904a1674ea2d6f4d518415e5771fcd_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="112" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic2.zhimg.com/v2-93904a1674ea2d6f4d518415e5771fcd_720w.jpg?source=3af55fa1"></figure><p>不同的笔记模板，就要更改不同的html代码，以系统自带的“基础“”为例子，你制成的卡片是这样的</p><figure data-size="normal"><img src="https://pic2.zhimg.com/v2-4320deea88765e6b685b0fe6f120fff4_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="179" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic1.zhimg.com/v2-4320deea88765e6b685b0fe6f120fff4_720w.jpg?source=3af55fa1"></figure><p>那么你的html代码是这样的</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-94cc461e20fd1800696d69af0c43ef46_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="225" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic1.zhimg.com/v2-94cc461e20fd1800696d69af0c43ef46_720w.jpg?source=3af55fa1"></figure><p>你要根据每个子标题去更改双大括号里的内容，如果我表达的不太准确，大家也可以根据下面的这个例子来尝试举一反三一下</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-6ed5142d88445153f31ff73551e7b500_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="256" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic1.zhimg.com/v2-6ed5142d88445153f31ff73551e7b500_720w.jpg?source=3af55fa1"></figure><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-e711e328d2bd6a912989e1fe9113cada_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="232" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic3.zhimg.com/v2-e711e328d2bd6a912989e1fe9113cada_720w.jpg?source=3af55fa1"></figure><p></p>