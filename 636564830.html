<!DOCTYPE html>
<html lang="zh">
<head>
<title>FSRS4Anki ä½¿ç”¨æŒ‡åŒ— | ZhiHu Archive</title>
<meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="FSRS4Anki ä½¿ç”¨æŒ‡åŒ— | ZhiHu Archive">
<meta property="og:site_name" content="ZhiHu Archive for Thoughts Memo">
<meta property="og:url" content="https://zhuanlan.zhihu.com/p/636564830">
<meta property="og:image" content="https://picx.zhimg.com/v2-45bb03201deafd09042d18f802df727a_720w.jpg?source=172ae18b">
<meta property="og:description" content="é˜…è¯»é¡»çŸ¥ï¼šè¯¥æ•™ç¨‹åªé€‚ç”¨äº Anki 2.1.62-2.1.66ã€‚æ–°ç‰ˆæœ¬çš„æ•™ç¨‹åœ¨æ­¤ï¼š Anki æ–°ç®—æ³• FSRS é…ç½®æŒ‡å— ã€‚0 ä»‹ç»FSRS4Ankiï¼Œå³ Free Spaced Repetition Scheduler for Ankiï¼Œä¸€æ¬¾èƒ½åœ¨ Anki ä¸Šè¿è¡Œçš„è‡ªç”±ã€å¼€æºçš„é—´éš”é‡å¤è°ƒåº¦ç®—æ³•ã€‚ç›¸è¾ƒäº Anki å†…ç½®çš„ã€æœ‰ç€é•¿è¾¾ 30 â€¦">
<meta name="description" content="é˜…è¯»é¡»çŸ¥ï¼šè¯¥æ•™ç¨‹åªé€‚ç”¨äº Anki 2.1.62-2.1.66ã€‚æ–°ç‰ˆæœ¬çš„æ•™ç¨‹åœ¨æ­¤ï¼š Anki æ–°ç®—æ³• FSRS é…ç½®æŒ‡å— ã€‚0 ä»‹ç»FSRS4Ankiï¼Œå³ Free Spaced Repetition Scheduler for Ankiï¼Œä¸€æ¬¾èƒ½åœ¨ Anki ä¸Šè¿è¡Œçš„è‡ªç”±ã€å¼€æºçš„é—´éš”é‡å¤è°ƒåº¦ç®—æ³•ã€‚ç›¸è¾ƒäº Anki å†…ç½®çš„ã€æœ‰ç€é•¿è¾¾ 30 â€¦">
<meta data-pagefind-meta="title" content="FSRS4Anki ä½¿ç”¨æŒ‡åŒ—">
<meta data-pagefind-meta="image" content="https://picx.zhimg.com/v2-45bb03201deafd09042d18f802df727a_720w.jpg?source=172ae18b">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="FSRS4Anki ä½¿ç”¨æŒ‡åŒ— | ZhiHu Archive">
<meta name="twitter:description" content="é˜…è¯»é¡»çŸ¥ï¼šè¯¥æ•™ç¨‹åªé€‚ç”¨äº Anki 2.1.62-2.1.66ã€‚æ–°ç‰ˆæœ¬çš„æ•™ç¨‹åœ¨æ­¤ï¼š Anki æ–°ç®—æ³• FSRS é…ç½®æŒ‡å— ã€‚0 ä»‹ç»FSRS4Ankiï¼Œå³ Free Spaced Repetition Scheduler for Ankiï¼Œä¸€æ¬¾èƒ½åœ¨ Anki ä¸Šè¿è¡Œçš„è‡ªç”±ã€å¼€æºçš„é—´éš”é‡å¤è°ƒåº¦ç®—æ³•ã€‚ç›¸è¾ƒäº Anki å†…ç½®çš„ã€æœ‰ç€é•¿è¾¾ 30 â€¦">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<meta name="google-site-verification" content="U7ZAFUgGNK60mmMqaRygg5vy-k8pwbPbDFXNjDCu7Xk" />
<link rel="alternate" type="application/rss+xml" title="ZhiHu Archive for Thoughts Memo" href="https://l-m-sherlock.github.io/ZhiHuArchive/feed.xml">
<link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/yue.css@0.4.0/yue.css">
<script>
const redirect = false;
if (redirect) {
window.location.replace("https://zhuanlan.zhihu.com/p/636564830");
}
</script>
<style>
.origin_image {
width: 100%;
}
figure {
margin: 1.4em 0;
}
figure img {
width: 100%;
}
img {
vertical-align: middle;
}
.author {
display: flex;
gap: 1em;
align-items: center;
}
#avatar {
width: 100px;
height: 100px;
}
.author > div {
flex: 1;
}
a {
color: #2563eb;
text-decoration: none;
border-bottom: 1px solid rgba(37, 99, 235, 0.3);
border-radius: 4px;
padding: 0 0.1em;
transition: color 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
}
a:hover,
a:focus-visible {
color: #1d4ed8;
border-bottom-color: rgba(29, 78, 216, 0.6);
background-color: rgba(37, 99, 235, 0.08);
}
a:focus-visible {
outline: none;
box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.25);
}
a[data-draft-type="link-card"] {
display: block;
border-bottom: none;
padding: 0;
background: none;
}
.references {
font-size: 0.85em;
}
.formula-display {
display: block;
text-align: center;
}
</style>
</head>
<body style="max-width: 1000px; margin: 0 auto; padding: 0 1em 0 1em;" class="yue">
<p data-pagefind-ignore><a href="./">â† è¿”å›ç›®å½•</a></p>
<hr>
<header>
<img class="origin_image" src="https://picx.zhimg.com/v2-45bb03201deafd09042d18f802df727a_720w.jpg?source=172ae18b"/>
<h1><a href="https://zhuanlan.zhihu.com/p/636564830" target="_blank" rel="noopener noreferrer">FSRS4Anki ä½¿ç”¨æŒ‡åŒ—</a></h1>
<div class="author">
<img class="avatar" id="avatar" src="https://picx.zhimg.com/v2-d571786b77078321f5f6ef92f4967877_l.jpg?source=172ae18b" />
<div>
<h2 rel="author">
<a href="https://www.zhihu.com/people/4c592f496dc33822b560b382907ff1d0" target="_blank" rel="noopener noreferrer">@Thoughts Memo</a>
</h2>
<p>å­¦æ ¡â‰ æ•™è‚²â‰ æŠ€èƒ½ï¼›æ–‡å‡­æº¢ä»·=80%ä¿¡å·ä¼ é€’+20%äººåŠ›èµ„æœ¬</p>
</div>
</div>
<time datetime="2023-06-12T14:01:50">å‘è¡¨äº 2023å¹´06æœˆ12æ—¥</time>
<p rel="stats"style="color: #999; font-size: 0.9em;">370 ğŸ‘ / 513 ğŸ’¬</p>
</header>
<article data-pagefind-body>
<p data-pid="TsceC_hy">é˜…è¯»é¡»çŸ¥ï¼šè¯¥æ•™ç¨‹åªé€‚ç”¨äº Anki 2.1.62-2.1.66ã€‚æ–°ç‰ˆæœ¬çš„æ•™ç¨‹åœ¨æ­¤ï¼š<a class="internal" href="./664758200.html" rel="noopener noreferrer" target="_blank">Anki æ–°ç®—æ³• FSRS é…ç½®æŒ‡å—</a>ã€‚</p><h2>0 ä»‹ç»</h2><p data-pid="-eldXLXR">FSRS4Ankiï¼Œå³ Free Spaced Repetition Scheduler for Ankiï¼Œä¸€æ¬¾èƒ½åœ¨ Anki ä¸Šè¿è¡Œçš„è‡ªç”±ã€å¼€æºçš„é—´éš”é‡å¤è°ƒåº¦ç®—æ³•ã€‚ç›¸è¾ƒäº Anki å†…ç½®çš„ã€æœ‰ç€é•¿è¾¾ 30 å¹´å†å²çš„ SM-2 ç®—æ³•ï¼ŒFSRS æ›´æ–°ã€æ›´å‡†ã€æ›´å¼ºã€‚</p><p data-pid="-aBuMBvB">FSRS4Anki ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šSchedulerï¼ˆè°ƒåº¦å™¨ï¼‰ã€Optimizerï¼ˆä¼˜åŒ–å™¨ï¼‰å’Œ Helperï¼ˆåŠ©æ‰‹æ’ä»¶ï¼‰ã€‚</p><ul><li data-pid="iMvIMRqT">Scheduler å¯ä»¥æ ¹æ®å½“å‰å¡ç‰‡çš„è®°å¿†çŠ¶æ€ã€å¤ä¹ é—´éš”å’Œå¤ä¹ æ‰“åˆ†æ¥é¢„æµ‹è®°å¿†çŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ç»™å‡ºåˆé€‚çš„å¤ä¹ é—´éš”ã€‚</li><li data-pid="bKH7rB3F">Optimizer å¯ä»¥æ ¹æ®å­¦ä¹ è€…ä¸Šä¼ çš„å†å²å¤ä¹ è®°å½•ï¼Œç”Ÿæˆæ‹Ÿåˆå­¦ä¹ è€…è®°å¿†æƒ…å†µçš„æ¨¡å‹æƒé‡ã€‚</li><li data-pid="4AkEpVUw">Helper ä»¥ FSRS è®°å¿†çŠ¶æ€ä¸ºæ ¸å¿ƒï¼Œå…è®¸å­¦ä¹ è€…æ›´åŠ çµæ´»åœ°å¤ä¹ ã€‚</li></ul><p data-pid="4lx_TDCg">ä»¥ä¸‹æ˜¯ FSRS4Anki çš„ä½¿ç”¨æ•™ç¨‹ã€‚</p><h2>1 å¿«é€Ÿä¸Šæ‰‹</h2><h3>1.1 å¼€å¯ Anki çš„ V3 æ’ç¨‹ç®—æ³•</h3><p data-pid="Kuhr2Ch4">å‹¾é€‰<code>è®¾ç½®&gt;å¤ä¹ &gt;å¯ç”¨ V3 æ’ç¨‹ç®—æ³•</code> </p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://picx.zhimg.com/v2-dfe932d39e85a2d38632c8399f2f5f33_r.jpg" data-original-token="v2-dfe932d39e85a2d38632c8399f2f5f33" data-rawheight="693" data-rawwidth="639" data-size="normal" src="https://picx.zhimg.com/v2-dfe932d39e85a2d38632c8399f2f5f33_1440w.jpg" width="639"/></figure><h3>1.2 ç²˜è´´ FSRS ç®—æ³•ä»£ç </h3><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pica.zhimg.com/v2-42fb9d2cbf89ea427b4504df273477a0_r.jpg" data-original-token="v2-42fb9d2cbf89ea427b4504df273477a0" data-rawheight="828" data-rawwidth="800" data-size="normal" src="https://pica.zhimg.com/v2-42fb9d2cbf89ea427b4504df273477a0_1440w.jpg" width="800"/></figure><p data-pid="PlTVwDNa">åœ¨ç‰Œç»„é€‰é¡¹ä¸­ï¼Œæ‰¾åˆ°é«˜çº§è®¾ç½®ä¸€æ ï¼Œåœ¨è‡ªå®šä¹‰æ’ç¨‹ä¸­ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š</p><div class="highlight"><pre><code class="language-js"><span class="c1">// FSRS4Anki v4.3.0 Scheduler Qt6
</span><span class="c1"></span><span class="nx">set_version</span><span class="p">();</span>
<span class="c1">// The latest version will be released on https://github.com/open-spaced-repetition/fsrs4anki/releases/latest
</span><span class="c1"></span>
<span class="c1">// Configuration Start
</span><span class="c1"></span>
<span class="kr">const</span> <span class="nx">deckParams</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
<span class="c1">// Default parameters of FSRS4Anki for global
</span><span class="c1"></span><span class="s2">"deckName"</span><span class="o">:</span> <span class="s2">"global config for FSRS4Anki"</span><span class="p">,</span>
<span class="s2">"w"</span><span class="o">:</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">,</span> <span class="mf">5.8</span><span class="p">,</span> <span class="mf">4.93</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">,</span> <span class="mf">0.86</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">0.14</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">,</span> <span class="mf">2.18</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.34</span><span class="p">,</span> <span class="mf">1.26</span><span class="p">,</span> <span class="mf">0.29</span><span class="p">,</span> <span class="mf">2.61</span><span class="p">],</span>
<span class="c1">// The above parameters can be optimized via FSRS4Anki optimizer.
</span><span class="c1"></span><span class="c1">// For details about the parameters, please see: https://github.com/open-spaced-repetition/fsrs4anki/wiki/The-Algorithm
</span><span class="c1"></span><span class="c1">// User's custom parameters for global
</span><span class="c1"></span><span class="s2">"requestRetention"</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="c1">// recommended setting: 0.8 ~ 0.9
</span><span class="c1"></span><span class="s2">"maximumInterval"</span><span class="o">:</span> <span class="mi">36500</span><span class="p">,</span>
<span class="c1">// FSRS only modifies the long-term scheduling. So (re)learning steps in deck options work as usual.
</span><span class="c1"></span><span class="c1">// I recommend setting steps shorter than 1 day.
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="p">{</span>
<span class="c1">// Example 1: User's custom parameters for this deck and its sub-decks.
</span><span class="c1"></span><span class="s2">"deckName"</span><span class="o">:</span> <span class="s2">"MainDeck1"</span><span class="p">,</span>
<span class="s2">"w"</span><span class="o">:</span> <span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">,</span> <span class="mf">6.8</span><span class="p">,</span> <span class="mf">4.72</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">0.17</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="mf">2.15</span><span class="p">,</span> <span class="mf">0.07</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">1.17</span><span class="p">,</span> <span class="mf">0.32</span><span class="p">,</span> <span class="mf">2.53</span><span class="p">],</span>
<span class="s2">"requestRetention"</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span>
<span class="s2">"maximumInterval"</span><span class="o">:</span> <span class="mi">36500</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
<span class="c1">// Example 2: User's custom parameters for this deck and its sub-decks.
</span><span class="c1"></span><span class="c1">// Don't omit any keys.
</span><span class="c1"></span><span class="s2">"deckName"</span><span class="o">:</span> <span class="s2">"MainDeck2::SubDeck::SubSubDeck"</span><span class="p">,</span>
<span class="s2">"w"</span><span class="o">:</span> <span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">,</span> <span class="mf">6.8</span><span class="p">,</span> <span class="mf">4.72</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">0.17</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="mf">2.15</span><span class="p">,</span> <span class="mf">0.07</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">1.17</span><span class="p">,</span> <span class="mf">0.32</span><span class="p">,</span> <span class="mf">2.53</span><span class="p">],</span>
<span class="s2">"requestRetention"</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span>
<span class="s2">"maximumInterval"</span><span class="o">:</span> <span class="mi">36500</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="c1">// To turn off FSRS in specific decks, fill them into the skip_decks list below.
</span><span class="c1">// Please don't remove it even if you don't need it.
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">skip_decks</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"MainDeck3"</span><span class="p">,</span> <span class="s2">"MainDeck4::SubDeck"</span><span class="p">];</span>

<span class="c1">// "Fuzz" is a small random delay applied to new intervals to prevent cards from
</span><span class="c1">// sticking together and always coming up for review on the same day
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">enable_fuzz</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// FSRS supports displaying memory states of cards.
</span><span class="c1">// Enable it for debugging if you encounter something wrong.
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">display_memory_state</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// Configuration End
</span><span class="c1"></span>
<span class="kr">debugger</span><span class="p">;</span>

<span class="c1">// display if FSRS is enabled
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nx">display_memory_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">prev</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'FSRS_status'</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="p">)</span> <span class="p">{</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span> <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">fsrs_status</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'span'</span><span class="p">);</span>
  <span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">"&lt;br&gt;FSRS enabled"</span><span class="p">;</span>
  <span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">"FSRS_status"</span><span class="p">;</span>
  <span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">"font-size:12px;opacity:0.5;font-family:monospace;text-align:left;line-height:1em;"</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">fsrs_status</span><span class="p">);</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"qa"</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">+=</span> <span class="s2">"min-height:50vh;"</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{};</span>
<span class="c1">// get the name of the card's deck
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nx">deck_name</span> <span class="o">=</span> <span class="nx">get_deckname</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">display_memory_state</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">"&lt;br&gt;Deck name: "</span> <span class="o">+</span> <span class="nx">deck_name</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">i</span> <span class="k">of</span> <span class="nx">skip_decks</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">deck_name</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">"FSRS enabled"</span><span class="p">,</span> <span class="s2">"FSRS disabled"</span><span class="p">);</span>
  <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// Arrange the deckParams of sub-decks in front of their parent decks.
</span><span class="c1"></span>  <span class="nx">deckParams</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">deckName</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">deckName</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">deckParams</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">deck_name</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="nx">deckParams</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s2">"deckName"</span><span class="p">]))</span> <span class="p">{</span>
  <span class="nx">params</span> <span class="o">=</span> <span class="nx">deckParams</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">display_memory_state</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">"&lt;br&gt;Deck name not found"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">params</span> <span class="o">=</span> <span class="nx">deckParams</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">deck</span> <span class="p">=&gt;</span> <span class="nx">deck</span><span class="p">.</span><span class="nx">deckName</span> <span class="o">===</span> <span class="s2">"global config for FSRS4Anki"</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span><span class="s2">"w"</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">requestRetention</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span><span class="s2">"requestRetention"</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">maximumInterval</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span><span class="s2">"maximumInterval"</span><span class="p">];</span>
<span class="c1">// auto-calculate intervalModifier
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">intervalModifier</span> <span class="o">=</span> <span class="mi">9</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">requestRetention</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// global fuzz factor for all ratings.
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">fuzz_factor</span> <span class="o">=</span> <span class="nx">set_fuzz_factor</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">ratings</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"again"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"hard"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"good"</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">"easy"</span><span class="o">:</span> <span class="mi">4</span>
<span class="p">};</span>
<span class="c1">// For new cards
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nx">is_new</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">init_states</span><span class="p">();</span>
  <span class="kr">const</span> <span class="nx">good_interval</span> <span class="o">=</span> <span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">easy_interval</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span><span class="p">),</span> <span class="nx">good_interval</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">good_interval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">easy_interval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// For learning/relearning cards
</span><span class="c1"></span><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">is_learning</span><span class="p">())</span> <span class="p">{</span>
  <span class="c1">// Init states if the card didn't contain customData
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">is_empty</span><span class="p">())</span> <span class="p">{</span>
<span class="nx">init_states</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="kr">const</span> <span class="nx">good_interval</span> <span class="o">=</span> <span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">easy_interval</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span><span class="p">),</span> <span class="nx">good_interval</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">good_interval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">easy_interval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// For review cards
</span><span class="c1"></span><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">is_review</span><span class="p">())</span> <span class="p">{</span>
  <span class="c1">// Convert the interval and factor to stability and difficulty if the card didn't contain customData
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">is_empty</span><span class="p">())</span> <span class="p">{</span>
<span class="nx">convert_states</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="kr">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">elapsedDays</span> <span class="o">?</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">elapsedDays</span> <span class="o">:</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="p">.</span><span class="nx">rescheduling</span><span class="p">.</span><span class="nx">originalState</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">elapsedDays</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">last_d</span> <span class="o">=</span> <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">last_s</span> <span class="o">=</span> <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">s</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">retrievability</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">interval</span> <span class="o">/</span> <span class="p">(</span><span class="mi">9</span> <span class="o">*</span> <span class="nx">last_s</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">display_memory_state</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">fsrs_status</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">"&lt;br&gt;D: "</span> <span class="o">+</span> <span class="nx">last_d</span> <span class="o">+</span> <span class="s2">"&lt;br&gt;S: "</span> <span class="o">+</span> <span class="nx">last_s</span> <span class="o">+</span> <span class="s2">"&lt;br&gt;R: "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">retrievability</span> <span class="o">*</span> <span class="mi">100</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"%"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">next_difficulty</span><span class="p">(</span><span class="nx">last_d</span><span class="p">,</span> <span class="s2">"again"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">next_forget_stability</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">last_s</span><span class="p">,</span> <span class="nx">retrievability</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">next_difficulty</span><span class="p">(</span><span class="nx">last_d</span><span class="p">,</span> <span class="s2">"hard"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">next_recall_stability</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">last_s</span><span class="p">,</span> <span class="nx">retrievability</span><span class="p">,</span> <span class="s2">"hard"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">next_difficulty</span><span class="p">(</span><span class="nx">last_d</span><span class="p">,</span> <span class="s2">"good"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">next_recall_stability</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">last_s</span><span class="p">,</span> <span class="nx">retrievability</span><span class="p">,</span> <span class="s2">"good"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">next_difficulty</span><span class="p">(</span><span class="nx">last_d</span><span class="p">,</span> <span class="s2">"easy"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">next_recall_stability</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span> <span class="nx">last_s</span><span class="p">,</span> <span class="nx">retrievability</span><span class="p">,</span> <span class="s2">"easy"</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">hard_interval</span> <span class="o">=</span> <span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">s</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">good_interval</span> <span class="o">=</span> <span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">easy_interval</span> <span class="o">=</span> <span class="nx">next_interval</span><span class="p">(</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span><span class="p">);</span>
  <span class="nx">hard_interval</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">hard_interval</span><span class="p">,</span> <span class="nx">good_interval</span><span class="p">)</span>
  <span class="nx">good_interval</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">good_interval</span><span class="p">,</span> <span class="nx">hard_interval</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="nx">easy_interval</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">easy_interval</span><span class="p">,</span> <span class="nx">good_interval</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">hard_interval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">good_interval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">states</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">easy_interval</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">constrain_difficulty</span><span class="p">(</span><span class="nx">difficulty</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">+</span><span class="nx">difficulty</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">apply_fuzz</span><span class="p">(</span><span class="nx">ivl</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">enable_fuzz</span> <span class="o">||</span> <span class="nx">ivl</span> <span class="o">&lt;</span> <span class="mf">2.5</span><span class="p">)</span> <span class="k">return</span> <span class="nx">ivl</span><span class="p">;</span>
  <span class="nx">ivl</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">ivl</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">min_ivl</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">ivl</span> <span class="o">*</span> <span class="mf">0.95</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
  <span class="kd">let</span> <span class="nx">max_ivl</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">ivl</span> <span class="o">*</span> <span class="mf">1.05</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">is_review</span><span class="p">())</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">?</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">:</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="p">.</span><span class="nx">rescheduling</span><span class="p">.</span><span class="nx">originalState</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">ivl</span> <span class="o">&gt;</span> <span class="nx">scheduledDays</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">min_ivl</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">min_ivl</span><span class="p">,</span> <span class="nx">scheduledDays</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">fuzz_factor</span> <span class="o">*</span> <span class="p">(</span><span class="nx">max_ivl</span> <span class="o">-</span> <span class="nx">min_ivl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">min_ivl</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">next_interval</span><span class="p">(</span><span class="nx">stability</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">new_interval</span> <span class="o">=</span> <span class="nx">apply_fuzz</span><span class="p">(</span><span class="nx">stability</span> <span class="o">*</span> <span class="nx">intervalModifier</span><span class="p">);</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">new_interval</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">maximumInterval</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">next_difficulty</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">rating</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">next_d</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">-</span> <span class="nx">w</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nx">ratings</span><span class="p">[</span><span class="nx">rating</span><span class="p">]</span> <span class="o">-</span> <span class="mi">3</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">constrain_difficulty</span><span class="p">(</span><span class="nx">mean_reversion</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">next_d</span><span class="p">));</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">mean_reversion</span><span class="p">(</span><span class="nx">init</span><span class="p">,</span> <span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">w</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">*</span> <span class="nx">init</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">w</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="o">*</span> <span class="nx">current</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">next_recall_stability</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">rating</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">hardPenalty</span> <span class="o">=</span> <span class="nx">rating</span> <span class="o">===</span> <span class="s2">"hard"</span> <span class="o">?</span> <span class="nx">w</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">easyBonus</span> <span class="o">=</span> <span class="nx">rating</span> <span class="o">===</span> <span class="s2">"easy"</span> <span class="o">?</span> <span class="nx">w</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">+</span><span class="p">(</span><span class="nx">s</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="o">*</span>
<span class="p">(</span><span class="mi">11</span> <span class="o">-</span> <span class="nx">d</span><span class="p">)</span> <span class="o">*</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="o">-</span><span class="nx">w</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span> <span class="o">*</span>
<span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">r</span><span class="p">)</span> <span class="o">*</span> <span class="nx">w</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span>
<span class="nx">hardPenalty</span> <span class="o">*</span>
<span class="nx">easyBonus</span><span class="p">)).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">next_forget_stability</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">*</span> 
<span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="o">-</span><span class="nx">w</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span> <span class="o">*</span> 
<span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">w</span><span class="p">[</span><span class="mi">13</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> 
<span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">r</span><span class="p">)</span> <span class="o">*</span> <span class="nx">w</span><span class="p">[</span><span class="mi">14</span><span class="p">]),</span> <span class="nx">s</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">init_states</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">init_difficulty</span><span class="p">(</span><span class="s2">"again"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">init_stability</span><span class="p">(</span><span class="s2">"again"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">init_difficulty</span><span class="p">(</span><span class="s2">"hard"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">init_stability</span><span class="p">(</span><span class="s2">"hard"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">init_difficulty</span><span class="p">(</span><span class="s2">"good"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">init_stability</span><span class="p">(</span><span class="s2">"good"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">init_difficulty</span><span class="p">(</span><span class="s2">"easy"</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">init_stability</span><span class="p">(</span><span class="s2">"easy"</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">init_difficulty</span><span class="p">(</span><span class="nx">rating</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">+</span><span class="nx">constrain_difficulty</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">-</span> <span class="nx">w</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nx">ratings</span><span class="p">[</span><span class="nx">rating</span><span class="p">]</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">init_stability</span><span class="p">(</span><span class="nx">rating</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="nx">ratings</span><span class="p">[</span><span class="nx">rating</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="mf">0.1</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">convert_states</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">scheduledDays</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span> <span class="o">?</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span> <span class="o">:</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="p">.</span><span class="nx">rescheduling</span><span class="p">.</span><span class="nx">originalState</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">scheduledDays</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">easeFactor</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span> <span class="o">?</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">easeFactor</span> <span class="o">:</span> <span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="p">.</span><span class="nx">rescheduling</span><span class="p">.</span><span class="nx">originalState</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">easeFactor</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">old_s</span> <span class="o">=</span> <span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">scheduledDays</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">old_d</span> <span class="o">=</span> <span class="nx">constrain_difficulty</span><span class="p">(</span><span class="mi">11</span> <span class="o">-</span> <span class="p">(</span><span class="nx">easeFactor</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">old_s</span><span class="p">,</span> <span class="o">-</span><span class="nx">w</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">*</span> <span class="nx">w</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)));</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">old_d</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">old_s</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">old_d</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">old_s</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">old_d</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">old_s</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">old_d</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">old_s</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">is_new</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="k">new</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="k">new</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">hasOwn</span><span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span><span class="p">,</span> <span class="s1">'new'</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">is_learning</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">learning</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">learning</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">hasOwn</span><span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span><span class="p">,</span> <span class="s1">'learning'</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">relearning</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">relearning</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">hasOwn</span><span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span><span class="p">,</span> <span class="s1">'relearning'</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">is_review</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">normal</span><span class="o">?</span><span class="p">.</span><span class="nx">review</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">hasOwn</span><span class="p">(</span><span class="nx">states</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filtered</span><span class="o">?</span><span class="p">.</span><span class="nx">rescheduling</span><span class="o">?</span><span class="p">.</span><span class="nx">originalState</span><span class="p">,</span> <span class="s1">'review'</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">is_empty</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">d</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">s</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">d</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">s</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">d</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">s</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">d</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">s</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">set_version</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">version</span> <span class="o">=</span> <span class="s2">"v4.3.0"</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">version</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">version</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">version</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">version</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">get_deckname</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">ctx</span> <span class="o">!==</span> <span class="s1">'undefined'</span> <span class="o">&amp;&amp;</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">deckName</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">deckName</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"deck"</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"deck"</span><span class="p">).</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"deck_name"</span><span class="p">))</span> <span class="p">{</span>
<span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"deck"</span><span class="p">).</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"deck_name"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">get_seed</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">seed</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">seed</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">seed</span> <span class="o">|</span> <span class="o">!</span><span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">seed</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">ctx</span> <span class="o">!==</span> <span class="s1">'undefined'</span> <span class="o">&amp;&amp;</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">seed</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">seed</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"qa"</span><span class="p">).</span><span class="nx">innerText</span><span class="p">;</span>
<span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="k">return</span> <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">seed</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">set_fuzz_factor</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Note: Originally copied from seedrandom.js package (https://github.com/davidbau/seedrandom)
</span><span class="c1"></span>  <span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">s</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="s2">"random"</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">52</span><span class="p">),</span><span class="nx">y</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">l</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="kd">function</span> <span class="nx">n</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">){</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">g</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="nx">t</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">n</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">;)</span><span class="nx">n</span><span class="o">=</span><span class="p">(</span><span class="nx">n</span><span class="o">+</span><span class="nx">r</span><span class="p">)</span><span class="o">*</span><span class="nx">l</span><span class="p">,</span><span class="nx">t</span><span class="o">*=</span><span class="nx">l</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">g</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="k">for</span><span class="p">(;</span><span class="nx">y</span><span class="o">&lt;=</span><span class="nx">n</span><span class="p">;)</span><span class="nx">n</span><span class="o">/=</span><span class="mi">2</span><span class="p">,</span><span class="nx">t</span><span class="o">/=</span><span class="mi">2</span><span class="p">,</span><span class="nx">r</span><span class="o">&gt;&gt;&gt;=</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span><span class="p">(</span><span class="nx">n</span><span class="o">+</span><span class="nx">r</span><span class="p">)</span><span class="o">/</span><span class="nx">t</span><span class="p">}</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="p">[],</span><span class="nx">i</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="kd">function</span> <span class="nx">n</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="p">[],</span><span class="nx">i</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">t</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="o">&amp;&amp;</span><span class="s2">"object"</span><span class="o">==</span><span class="nx">i</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">t</span><span class="p">)</span><span class="k">try</span><span class="p">{</span><span class="nx">o</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">n</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">r</span><span class="o">-</span><span class="mi">1</span><span class="p">))}</span><span class="k">catch</span><span class="p">(</span><span class="nx">n</span><span class="p">){}</span><span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">o</span><span class="o">:</span><span class="s2">"string"</span><span class="o">==</span><span class="nx">i</span><span class="o">?</span><span class="nx">t</span><span class="o">:</span><span class="nx">t</span><span class="o">+</span><span class="s2">"\0"</span><span class="p">}((</span><span class="nx">t</span><span class="o">=</span><span class="mi">1</span><span class="o">==</span><span class="nx">t</span><span class="o">?</span><span class="p">{</span><span class="nx">entropy</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="nx">t</span><span class="o">||</span><span class="p">{}).</span><span class="nx">entropy</span><span class="o">?</span><span class="p">[</span><span class="nx">n</span><span class="p">,</span><span class="nx">S</span><span class="p">(</span><span class="nx">a</span><span class="p">)]</span><span class="o">:</span><span class="kc">null</span><span class="o">==</span><span class="nx">n</span><span class="o">?</span><span class="kd">function</span><span class="p">(){</span><span class="k">try</span><span class="p">{</span><span class="kd">var</span> <span class="nx">n</span><span class="p">;</span><span class="k">return</span> <span class="nx">s</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">randomBytes</span><span class="p">)</span><span class="o">?</span><span class="nx">n</span><span class="o">=</span><span class="nx">n</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="nx">l</span><span class="p">),(</span><span class="nx">f</span><span class="p">.</span><span class="nx">crypto</span><span class="o">||</span><span class="nx">f</span><span class="p">.</span><span class="nx">msCrypto</span><span class="p">).</span><span class="nx">getRandomValues</span><span class="p">(</span><span class="nx">n</span><span class="p">)),</span><span class="nx">S</span><span class="p">(</span><span class="nx">n</span><span class="p">)}</span><span class="k">catch</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">navigator</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">t</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="p">.</span><span class="nx">plugins</span><span class="p">;</span><span class="k">return</span><span class="p">[</span><span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">screen</span><span class="p">,</span><span class="nx">S</span><span class="p">(</span><span class="nx">a</span><span class="p">)]}}()</span><span class="o">:</span><span class="nx">n</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="nx">o</span><span class="p">),</span><span class="nx">u</span><span class="o">=</span><span class="k">new</span> <span class="nx">m</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">int32</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="mi">0</span><span class="o">|</span><span class="nx">u</span><span class="p">.</span><span class="nx">g</span><span class="p">(</span><span class="mi">4</span><span class="p">)},</span><span class="nx">e</span><span class="p">.</span><span class="nx">quick</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">u</span><span class="p">.</span><span class="nx">g</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="mi">4294967296</span><span class="p">},</span><span class="nx">e</span><span class="p">.</span><span class="kr">double</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">(</span><span class="nx">S</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nx">S</span><span class="p">),</span><span class="nx">a</span><span class="p">),(</span><span class="nx">t</span><span class="p">.</span><span class="nx">pass</span><span class="o">||</span><span class="nx">r</span><span class="o">||</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span> <span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">S</span><span class="o">&amp;&amp;</span><span class="nx">v</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">u</span><span class="p">),</span><span class="nx">n</span><span class="p">.</span><span class="nx">state</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">v</span><span class="p">(</span><span class="nx">u</span><span class="p">,{})}),</span><span class="nx">r</span><span class="o">?</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span><span class="o">=</span><span class="nx">n</span><span class="p">,</span><span class="nx">t</span><span class="p">)</span><span class="o">:</span><span class="nx">n</span><span class="p">})(</span><span class="nx">e</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="s2">"global"</span><span class="k">in</span> <span class="nx">t</span><span class="o">?</span><span class="nx">t</span><span class="p">.</span><span class="nx">global</span><span class="o">:</span><span class="k">this</span><span class="o">==</span><span class="nx">c</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">state</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">m</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="kd">var</span> <span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">u</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">i</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">S</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="nx">r</span><span class="o">||</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="p">[</span><span class="nx">r</span><span class="o">++</span><span class="p">]);</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;)</span><span class="nx">i</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="nx">i</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">o</span><span class="o">=</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">o</span><span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="nx">e</span><span class="o">%</span><span class="nx">r</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">e</span><span class="p">])],</span><span class="nx">i</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">=</span><span class="nx">t</span><span class="p">;(</span><span class="nx">u</span><span class="p">.</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">i</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">j</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">S</span><span class="p">;</span><span class="nx">n</span><span class="o">--</span><span class="p">;)</span><span class="nx">t</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">e</span><span class="o">=</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">e</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="nx">r</span><span class="o">=</span><span class="nx">r</span><span class="o">*</span><span class="nx">l</span><span class="o">+</span><span class="nx">i</span><span class="p">[</span><span class="nx">h</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">o</span><span class="o">=</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">o</span><span class="o">+</span><span class="nx">t</span><span class="p">])</span><span class="o">+</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">=</span><span class="nx">t</span><span class="p">)];</span><span class="k">return</span> <span class="nx">u</span><span class="p">.</span><span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">u</span><span class="p">.</span><span class="nx">j</span><span class="o">=</span><span class="nx">o</span><span class="p">,</span><span class="nx">r</span><span class="p">})(</span><span class="nx">l</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">v</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">t</span><span class="p">){</span><span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">i</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">i</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">j</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">j</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">S</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">S</span><span class="p">.</span><span class="nx">slice</span><span class="p">(),</span><span class="nx">t</span><span class="p">}</span><span class="kd">function</span> <span class="nx">j</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">t</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">n</span><span class="o">+</span><span class="s2">""</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">o</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;)</span><span class="nx">t</span><span class="p">[</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">o</span><span class="p">]</span><span class="o">=</span><span class="nx">h</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">r</span><span class="o">^=</span><span class="mi">19</span><span class="o">*</span><span class="nx">t</span><span class="p">[</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">o</span><span class="p">])</span><span class="o">+</span><span class="nx">e</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">o</span><span class="o">++</span><span class="p">);</span><span class="k">return</span> <span class="nx">S</span><span class="p">(</span><span class="nx">t</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">S</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">j</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">random</span><span class="p">(),</span><span class="nx">a</span><span class="p">),</span><span class="s2">"object"</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">module</span><span class="o">&amp;&amp;</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">){</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="o">=</span><span class="nx">n</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">s</span><span class="o">=</span><span class="nx">require</span><span class="p">(</span><span class="s2">"crypto"</span><span class="p">)}</span><span class="k">catch</span><span class="p">(</span><span class="nx">n</span><span class="p">){}}</span><span class="k">else</span><span class="s2">"function"</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">define</span><span class="o">&amp;&amp;</span><span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="o">?</span><span class="nx">define</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">n</span><span class="p">})</span><span class="o">:</span><span class="nx">c</span><span class="p">[</span><span class="s2">"seed"</span><span class="o">+</span><span class="nx">p</span><span class="p">]</span><span class="o">=</span><span class="nx">n</span><span class="p">}(</span><span class="s2">"undefined"</span><span class="o">!=</span><span class="k">typeof</span> <span class="nx">self</span><span class="o">?</span><span class="nx">self</span><span class="o">:</span><span class="k">this</span><span class="p">,[],</span><span class="nb">Math</span><span class="p">);</span>
  <span class="c1">// MIT License
</span><span class="c1"></span>  <span class="c1">// Copyright 2019 David Bau.
</span><span class="c1"></span>  <span class="c1">// Permission is hereby granted, free of charge, to any person obtaining a copy
</span><span class="c1"></span>  <span class="c1">// of this software and associated documentation files (the "Software"), to deal
</span><span class="c1"></span>  <span class="c1">// in the Software without restriction, including without limitation the rights
</span><span class="c1"></span>  <span class="c1">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
</span><span class="c1"></span>  <span class="c1">// copies of the Software, and to permit persons to whom the Software is
</span><span class="c1"></span>  <span class="c1">// furnished to do so, subject to the following conditions:
</span><span class="c1"></span>  <span class="c1">// The above copyright notice and this permission notice shall be included in all
</span><span class="c1"></span>  <span class="c1">// copies or substantial portions of the Software.
</span><span class="c1"></span>  <span class="c1">// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
</span><span class="c1"></span>  <span class="c1">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
</span><span class="c1"></span>  <span class="c1">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
</span><span class="c1"></span>  <span class="c1">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
</span><span class="c1"></span>  <span class="c1">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
</span><span class="c1"></span>  <span class="c1">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
</span><span class="c1"></span>  <span class="c1">// SOFTWARE.
</span><span class="c1"></span>  <span class="kd">let</span> <span class="nx">seed</span> <span class="o">=</span> <span class="nx">get_seed</span><span class="p">();</span>
  <span class="kr">const</span> <span class="nx">generator</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">seedrandom</span><span class="p">(</span><span class="nx">seed</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">fuzz_factor</span> <span class="o">=</span> <span class="nx">generator</span><span class="p">();</span>
  <span class="nx">seed</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">fuzz_factor</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">);</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">again</span><span class="p">.</span><span class="nx">seed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">seed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10000</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">hard</span><span class="p">.</span><span class="nx">seed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">seed</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10000</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">good</span><span class="p">.</span><span class="nx">seed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">seed</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10000</span><span class="p">;</span>
  <span class="nx">customData</span><span class="p">.</span><span class="nx">easy</span><span class="p">.</span><span class="nx">seed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">seed</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10000</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">fuzz_factor</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><blockquote data-pid="Ed-VC13H">æœ€æ–°ç¨³å®šç‰ˆæœ¬çš„ä»£ç è¯·è§ï¼š<a class="wrap external" href="https://github.com/open-spaced-repetition/fsrs4anki/releases/latest" rel="nofollow noreferrer noopener" target="_blank">Releases Â· open-spaced-repetition/fsrs4anki (github.com)</a></blockquote><p data-pid="58NpUbTN">ç†è®ºä¸Šä½ å·²ç»å¼€å§‹ä½¿ç”¨ FSRS4Anki ç®—æ³•äº†ã€‚å¦‚æœä½ ä¸ç¡®å®šï¼Œå¯ä»¥å°†ä»£ç ä¸­çš„</p><div class="highlight"><pre><code class="language-js"><span class="kr">const</span> <span class="nx">display_memory_state</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</code></pre></div><p data-pid="9oKhZCTA">æ”¹ä¸º</p><div class="highlight"><pre><code class="language-js"><span class="kr">const</span> <span class="nx">display_memory_state</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</code></pre></div><p data-pid="wn8C0xwM">ç„¶åéšä¾¿æ‰“å¼€ä¸€ä¸ªç‰Œç»„å¤ä¹ ï¼Œä½ å°†çœ‹åˆ°ï¼š</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic4.zhimg.com/v2-0b84dfc2066520eac05cc1809e6f4b75_r.jpg" data-original-token="v2-0b84dfc2066520eac05cc1809e6f4b75" data-rawheight="598" data-rawwidth="667" data-size="normal" src="https://pic4.zhimg.com/v2-0b84dfc2066520eac05cc1809e6f4b75_1440w.jpg" width="667"/></figure><p data-pid="DtBzPjvO">è¿™è¡¨ç¤ºä½ çš„ FSRS å·²ç»æ­£å¸¸è¿è¡Œäº†ã€‚ç„¶åä½ å¯ä»¥å†æŠŠä»£ç æ”¹å›å»ï¼Œå°±ä¸ä¼šæ˜¾ç¤ºè¿™ä¸ªä¿¡æ¯äº†ã€‚</p><h2>2 è¿›é˜¶ä½¿ç”¨</h2><h3>2.1 ç”Ÿæˆä¸ªæ€§åŒ–å‚æ•°</h3><a class="wrap external" data-draft-node="block" data-draft-type="link-card" data-image="https://pica.zhimg.com/v2-040f8f3f57d5cb781faeec3ad2af9ad2_qhd.jpg" data-image-height="600" data-image-width="1200" href="https://github.com/open-spaced-repetition/fsrs4anki/blob/main/fsrs4anki_optimizer.ipynb" rel="nofollow noreferrer noopener" target="_blank">fsrs4anki/fsrs4anki_optimizer.ipynb at main Â· open-spaced-repetition/fsrs4anki</a><p data-pid="yoasI4cp">æ‰“å¼€ optimizer çš„ notebookï¼Œç‚¹å‡» Open in Colabï¼Œå³å¯åœ¨ Google Colab ä¸Šè¿è¡Œä¼˜åŒ–å™¨ï¼Œä¸éœ€è¦è‡ªå·±é…ç½®ä»£ç è¿è¡Œç¯å¢ƒï¼Œè¿˜å¯ä»¥ç™½å«– Google çš„æœºå™¨ï¼ˆéœ€è¦æ³¨å†Œ Google è´¦å·ï¼‰ï¼š</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-51b327eb51a7664947981b1e2f7b625d_r.jpg" data-original-token="v2-51b327eb51a7664947981b1e2f7b625d" data-rawheight="734" data-rawwidth="1616" data-size="normal" src="https://pic2.zhimg.com/v2-51b327eb51a7664947981b1e2f7b625d_1440w.jpg" width="1616"/></figure><p data-pid="U0ka43nT">åœ¨ Colab ä¸Šæ‰“å¼€åï¼Œåˆ‡åˆ°æ–‡ä»¶å¤¹æ ‡ç­¾é¡µï¼Œç„¶åç­‰ Optimizer è¿ä¸Š Google çš„æœºå™¨ï¼Œå°±å¯ä»¥å³é”®ä¸Šä¼ ä½ çš„ç‰Œç»„æ–‡ä»¶/é›†åˆæ–‡ä»¶äº†ã€‚è¯·åœ¨å¯¼å‡ºè¿™äº›æ–‡ä»¶æ—¶ï¼Œå‹¾é€‰ã€ŒåŒ…å«å­¦ä¹ è¿›åº¦ä¿¡æ¯ã€ä»¥åŠã€Œæ”¯æŒè¾ƒæ—§çš„Ankiç‰ˆæœ¬ã€ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic1.zhimg.com/v2-c0d71b46b1429929c8176c4bed80b66a_r.jpg" data-original-token="v2-c0d71b46b1429929c8176c4bed80b66a" data-rawheight="1074" data-rawwidth="1400" data-size="normal" src="https://pic1.zhimg.com/v2-c0d71b46b1429929c8176c4bed80b66a_1440w.jpg" width="1400"/></figure><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pica.zhimg.com/v2-f6beee55d26bc4447ae7ea7a67a071b6_r.jpg" data-original-token="v2-f6beee55d26bc4447ae7ea7a67a071b6" data-rawheight="440" data-rawwidth="1298" data-size="normal" src="https://pica.zhimg.com/v2-f6beee55d26bc4447ae7ea7a67a071b6_1440w.jpg" width="1298"/></figure><p data-pid="C8gCmkay">ä¼ å®Œåï¼ŒæŠŠ notebook é‡Œçš„ filename æ”¹æˆä½ ä¸Šä¼ çš„æ–‡ä»¶åç§°ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic3.zhimg.com/v2-d606ba6bf7ae0c44c13b48d7c28ec048_r.jpg" data-original-token="v2-d606ba6bf7ae0c44c13b48d7c28ec048" data-rawheight="1180" data-rawwidth="2098" data-size="normal" src="https://pic3.zhimg.com/v2-d606ba6bf7ae0c44c13b48d7c28ec048_1440w.jpg" width="2098"/></figure><p data-pid="XCKBM_g3">ç„¶åç‚¹å‡»ã€Œå…¨éƒ¨è¿è¡Œã€</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic4.zhimg.com/v2-c28ee6a502c71cf49f46291cdd2e5ac1_r.jpg" data-original-token="v2-c28ee6a502c71cf49f46291cdd2e5ac1" data-rawheight="510" data-rawwidth="1192" data-size="normal" src="https://pic4.zhimg.com/v2-c28ee6a502c71cf49f46291cdd2e5ac1_1440w.jpg" width="1192"/></figure><p data-pid="jKViw88N">ç„¶ååˆ° 2.3 èŠ‚ç­‰åˆ°ä»£ç è·‘å®Œï¼Œå¤åˆ¶è¾“å‡ºçš„ä¸ªæ€§åŒ–å‚æ•°ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pica.zhimg.com/v2-401ac9df90c09eb859221f90f79e18c8_r.jpg" data-original-token="v2-401ac9df90c09eb859221f90f79e18c8" data-rawheight="818" data-rawwidth="1994" data-size="normal" src="https://pica.zhimg.com/v2-401ac9df90c09eb859221f90f79e18c8_1440w.jpg" width="1994"/></figure><p data-pid="NehtqDVs">æ›¿æ¢å‰é¢ä½ å¤åˆ¶çš„ FSRS ä»£ç ä¸­çš„å‚æ•°ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic1.zhimg.com/v2-59158f2b7a9c23c0a7ae1561bb214ca6_r.jpg" data-original-token="v2-59158f2b7a9c23c0a7ae1561bb214ca6" data-rawheight="976" data-rawwidth="1620" data-size="normal" src="https://pic1.zhimg.com/v2-59158f2b7a9c23c0a7ae1561bb214ca6_1440w.jpg" width="1620"/></figure><p data-pid="kCr8T-i-">âš ï¸æ³¨æ„ï¼šæ›¿æ¢è¿™ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè¯·ä¸è¦æŠŠç»“å°¾çš„é€—å·ç»™åˆ æ‰äº†ã€‚</p><h3>2.2 ç‰Œç»„å‚æ•°è®¾ç½®</h3><p data-pid="QEz6t5fN">ä½ ä¹Ÿå¯ä»¥ä¸ºä¸åŒç‰Œç»„ç”Ÿæˆä¸åŒçš„å‚æ•°ï¼Œå¹¶åœ¨ä»£ç ä¸­åˆ†åˆ«é…ç½®ã€‚åœ¨é»˜è®¤é…ç½®ä¸­ï¼ŒdeckParams å·²ç»åŒ…å«äº†ä¸‰ç»„å‚æ•°ã€‚</p><p data-pid="uH2j9gXq">global config for FSRS4Anki è¿™ç»„æ˜¯å…¨å±€å‚æ•°ã€‚</p><p data-pid="0uInIflB">ALL::Learning::English::Reading è¿™ç»„æ˜¯åº”ç”¨äº <code>ALL::Learning::English::Reading</code> è¿™ä¸ªç‰Œç»„åŠå…¶å­ç‰Œç»„çš„å‚æ•°ã€‚</p><p data-pid="y-yUu4N1"> åŒç†ï¼Œç¬¬ä¸‰ç»„å°±æ˜¯åº”ç”¨äº <code>ALL::Archive</code> è¿™ä¸ªç‰Œç»„åŠå…¶å­ç‰Œç»„çš„å‚æ•°ã€‚å¤§å®¶å¯ä»¥æ›¿æ¢æˆè‡ªå·±è¦é…ç½®çš„ç‰Œç»„ã€‚å¦‚æœä¸å¤Ÿç”¨ï¼Œè¯·è‡ªè¡Œå¤åˆ¶æ·»åŠ ã€‚ </p><div class="highlight"><pre><code class="language-js"><span class="kr">const</span> <span class="nx">deckParams</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
<span class="c1">// Default parameters of FSRS4Anki for global
</span><span class="c1"></span><span class="s2">"deckName"</span><span class="o">:</span> <span class="s2">"global config for FSRS4Anki"</span><span class="p">,</span>
<span class="s2">"w"</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="c1">// The above parameters can be optimized via FSRS4Anki optimizer.
</span><span class="c1"></span><span class="c1">// For details about the parameters, please see: https://github.com/open-spaced-repetition/fsrs4anki/wiki/Free-Spaced-Repetition-Scheduler
</span><span class="c1"></span><span class="c1">// User's custom parameters for global
</span><span class="c1"></span><span class="s2">"requestRetention"</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="c1">// recommended setting: 0.8 ~ 0.9
</span><span class="c1"></span><span class="s2">"maximumInterval"</span><span class="o">:</span> <span class="mi">36500</span><span class="p">,</span>
<span class="s2">"easyBonus"</span><span class="o">:</span> <span class="mf">1.3</span><span class="p">,</span>
<span class="s2">"hardInterval"</span><span class="o">:</span> <span class="mf">1.2</span><span class="p">,</span>
<span class="c1">// FSRS only modifies the long-term scheduling. So (re)learning steps in deck options work as usual.
</span><span class="c1"></span><span class="c1">// I recommend setting steps shorter than 1 day.
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="p">{</span>
<span class="c1">// Example 1: User's custom parameters for this deck and its sub-decks.
</span><span class="c1"></span><span class="c1">// Need to add &lt;div id=deck deck_name="{{Deck}}"&gt;&lt;/div&gt; to your card's front template's first line.
</span><span class="c1"></span><span class="s2">"deckName"</span><span class="o">:</span> <span class="s2">"ALL::Learning::English::Reading"</span><span class="p">,</span>
<span class="s2">"w"</span><span class="o">:</span> <span class="p">[</span><span class="mf">1.1475</span><span class="p">,</span> <span class="mf">1.401</span><span class="p">,</span> <span class="mf">5.1483</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.4221</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.2282</span><span class="p">,</span> <span class="mf">0.035</span><span class="p">,</span> <span class="mf">1.4668</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1286</span><span class="p">,</span> <span class="mf">0.7539</span><span class="p">,</span> <span class="mf">1.9671</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2307</span><span class="p">,</span> <span class="mf">0.32</span><span class="p">,</span> <span class="mf">0.9451</span><span class="p">],</span>
<span class="s2">"requestRetention"</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span>
<span class="s2">"maximumInterval"</span><span class="o">:</span> <span class="mi">36500</span><span class="p">,</span>
<span class="s2">"easyBonus"</span><span class="o">:</span> <span class="mf">1.3</span><span class="p">,</span>
<span class="s2">"hardInterval"</span><span class="o">:</span> <span class="mf">1.2</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
<span class="c1">// Example 2: User's custom parameters for this deck and its sub-decks.
</span><span class="c1"></span><span class="c1">// Don't omit any keys.
</span><span class="c1"></span><span class="s2">"deckName"</span><span class="o">:</span> <span class="s2">"ALL::Archive"</span><span class="p">,</span>
<span class="s2">"w"</span><span class="o">:</span> <span class="p">[</span><span class="mf">1.2879</span><span class="p">,</span> <span class="mf">0.5135</span><span class="p">,</span> <span class="mf">4.9532</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.502</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0922</span><span class="p">,</span> <span class="mf">0.0081</span><span class="p">,</span> <span class="mf">1.3771</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0294</span><span class="p">,</span> <span class="mf">0.6718</span><span class="p">,</span> <span class="mf">1.8335</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.4066</span><span class="p">,</span> <span class="mf">0.7291</span><span class="p">,</span> <span class="mf">0.5517</span><span class="p">],</span>
<span class="s2">"requestRetention"</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span>
<span class="s2">"maximumInterval"</span><span class="o">:</span> <span class="mi">36500</span><span class="p">,</span>
<span class="s2">"easyBonus"</span><span class="o">:</span> <span class="mf">1.3</span><span class="p">,</span>
<span class="s2">"hardInterval"</span><span class="o">:</span> <span class="mf">1.2</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">];</span>
</code></pre></div><p data-pid="Zvlrfs0d">å¦‚æœä½ æœ‰äº›ç‰Œç»„ä¸æƒ³ä½¿ç”¨ FSRSï¼Œå¯ä»¥æŠŠè¿™äº›ç‰Œç»„çš„åç§°å¡«å…¥ skip_decks çš„åˆ—è¡¨ä¸­ã€‚</p><div class="highlight"><pre><code class="language-js"><span class="kr">const</span> <span class="nx">skip_decks</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"ALL::Learning::ML::NNDL"</span><span class="p">,</span> <span class="s2">"ALL::Learning::English"</span><span class="p">];</span>
</code></pre></div><h2>3 ä½¿ç”¨åŠ©æ‰‹æ’ä»¶</h2><p data-pid="41IHtka_">Helper æ’ä»¶çº¯å±é”¦ä¸Šæ·»èŠ±ï¼Œä¸å»ºè®®è¿‡å¤šä½¿ç”¨ã€‚å®‰è£…åœ°å€ï¼š</p><a class="wrap external" data-draft-node="block" data-draft-type="link-card" href="https://ankiweb.net/shared/info/759844606" rel="nofollow noreferrer noopener" target="_blank">FSRS4Anki Helper - AnkiWeb</a><h3>3.1 é‡æ–°è°ƒåº¦</h3><p data-pid="Z-SCCUuF">é‡æ–°è°ƒåº¦æ‰€æœ‰å¡ç‰‡ï¼Œå¯ä»¥åŸºäºå‰é¢æˆ‘ä»¬å¡«å…¥çš„ä¸ªæ€§åŒ–å‚æ•°ï¼Œæ ¹æ®æ¯å¼ å¡ç‰‡çš„å¤ä¹ å†å²ï¼Œé‡æ–°é¢„æµ‹è®°å¿†çŠ¶æ€ï¼Œå¹¶å®‰æ’é—´éš”ã€‚</p><p data-pid="vjwFJCNM">æ³¨æ„ï¼šå¯¹äºå·²ç»ä½¿ç”¨ Anki é»˜è®¤ç®—æ³•å¤ä¹ è¿‡å¤šæ¬¡çš„å¡ç‰‡ï¼Œé‡æ–°è°ƒåº¦å¯èƒ½ä¼šç»™å‡ºä¸ Scheduler ä¸åŒçš„é—´éš”ï¼Œå› ä¸º Scheduler åœ¨è¿è¡Œæ—¶æ— æ³•è·å¾—å®Œæ•´çš„å¤ä¹ å†å²ã€‚æ­¤æ—¶é‡æ–°è°ƒåº¦ç»™å‡ºçš„é—´éš”ä¼šæ›´åŠ å‡†ç¡®ã€‚ä½†ä¹‹åä¸¤è€…å°±æ²¡æœ‰åŒºåˆ«äº†ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-ca1de143fd11e4fafcd517d29b433991_r.jpg" data-original-token="v2-ca1de143fd11e4fafcd517d29b433991" data-rawheight="912" data-rawwidth="1240" data-size="normal" src="https://pic2.zhimg.com/v2-ca1de143fd11e4fafcd517d29b433991_1440w.jpg" width="1240"/></figure><h3>3.2 å‹åŠ›å¹³è¡¡</h3><p data-pid="VsWDZnke">å¼€å¯å‹åŠ›å¹³è¡¡é€‰é¡¹åï¼Œé‡æ–°è§„åˆ’æ—¶ä¼šè®©æ¯å¤©çš„å¤ä¹ é‡å°½å¯èƒ½ä¸€è‡´ã€å¹³æ»‘ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic3.zhimg.com/v2-f4b0644f72dad3f50c38966a925be532_r.jpg" data-original-token="v2-f4b0644f72dad3f50c38966a925be532" data-rawheight="912" data-rawwidth="1240" data-size="normal" src="https://pic3.zhimg.com/v2-f4b0644f72dad3f50c38966a925be532_1440w.jpg" width="1240"/></figure><p data-pid="CN3n2Rob">ä¸‹é¢æ˜¯å¯¹æ¯”ï¼Œç¬¬ä¸€å¼ æ˜¯å¼€ä¹‹å‰è¿›è¡Œé‡æ–°è°ƒåº¦ï¼Œç¬¬äºŒå¼ æ˜¯å¼€ä¹‹åè¿›è¡Œé‡æ–°è°ƒåº¦ï¼š</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pica.zhimg.com/v2-ecc44145f32f8fc144a287cfe455aee0_r.jpg" data-original-token="v2-ecc44145f32f8fc144a287cfe455aee0" data-rawheight="1300" data-rawwidth="1500" data-size="normal" src="https://pica.zhimg.com/v2-ecc44145f32f8fc144a287cfe455aee0_1440w.jpg" width="1500"/></figure><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-7f584c1292ed677639f0e919957534af_r.jpg" data-original-token="v2-7f584c1292ed677639f0e919957534af" data-rawheight="1300" data-rawwidth="1500" data-size="normal" src="https://pic2.zhimg.com/v2-7f584c1292ed677639f0e919957534af_1440w.jpg" width="1500"/></figure><h3>3.3 å‘¨æœ«æ”¾å‡</h3><p data-pid="5qg2H9au">å®é™…ä¸Šå¯ä»¥é€‰æ‹©åœ¨å‘¨ä¸€åˆ°å‘¨å¤©ä»»ä½•å‡ å¤©è¿›è¡Œæ”¾å‡ã€‚å¼€å¯åï¼Œè¿›è¡Œé‡æ–°è°ƒåº¦æ—¶ï¼ŒHelper å°†å°½å¯èƒ½é¿å¼€ä½ è®¾å®šçš„æ—¥æœŸå®‰æ’å¤ä¹ ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic1.zhimg.com/v2-26d0ab4c33021e9bea30374094c893be_r.jpg" data-original-token="v2-26d0ab4c33021e9bea30374094c893be" data-rawheight="912" data-rawwidth="1432" data-size="normal" src="https://pic1.zhimg.com/v2-26d0ab4c33021e9bea30374094c893be_1440w.jpg" width="1432"/></figure><p data-pid="mur8WZuO">æ•ˆæœï¼š</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://picx.zhimg.com/v2-54fbb34bf8abc478d7db58490fb1fe59_r.jpg" data-original-token="v2-54fbb34bf8abc478d7db58490fb1fe59" data-rawheight="1300" data-rawwidth="1500" data-size="normal" src="https://picx.zhimg.com/v2-54fbb34bf8abc478d7db58490fb1fe59_1440w.jpg" width="1500"/></figure><h3>3.4 æå‰/æ¨è¿Ÿ</h3><p data-pid="mJDOvGZd">è¿™ä¸¤ä¸ªåŠŸèƒ½å¾ˆç›¸ä¼¼ï¼Œæ”¾ä¸€èµ·è¯´ã€‚ä½ å¯ä»¥è®¾ç½®æå‰/æ¨è¿Ÿçš„å¡ç‰‡æ•°é‡ï¼ŒHelper æ’ä»¶å°†æŒ‰ç…§ç›¸å¯¹æå‰/æ¨è¿Ÿé¡ºåºæ’åºï¼Œç„¶åè¿›è¡Œæå‰/æ¨è¿Ÿï¼Œç¡®ä¿åœ¨æ»¡è¶³ä½ è®¾ç½®çš„å¡ç‰‡æ•°é‡çš„åŒæ—¶ï¼Œæœ€å°åŒ–å¯¹åŸæœ‰å¤ä¹ å®‰æ’çš„åç¦»ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pica.zhimg.com/v2-707d07977a3d88e06f5544a6a40b44f6_r.jpg" data-original-token="v2-707d07977a3d88e06f5544a6a40b44f6" data-rawheight="912" data-rawwidth="1240" data-size="normal" src="https://pica.zhimg.com/v2-707d07977a3d88e06f5544a6a40b44f6_1440w.jpg" width="1240"/></figure><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-02732f2010394a33ece76a055f9b3b21_r.jpg" data-original-token="v2-02732f2010394a33ece76a055f9b3b21" data-rawheight="354" data-rawwidth="1264" data-size="normal" src="https://pic2.zhimg.com/v2-02732f2010394a33ece76a055f9b3b21_1440w.jpg" width="1264"/></figure><h3>3.5 åˆ†æ•£å…³è”å¡ç‰‡</h3><p data-pid="6uqk7_qs">åœ¨ Anki ä¸­ï¼Œæœ‰äº›æ¨¡æ¿ä¼šä»åŒä¸€æ¡ç¬”è®°ä¸­ç”Ÿæˆå¤šå¼ åœ¨å†…å®¹ä¸Šæœ‰å…³è”çš„å¡ç‰‡ï¼Œæ¯”å¦‚ç¿»è½¬å¡ç‰‡ï¼ˆä¸­-&gt;è‹±ï¼Œè‹±-&gt;ä¸­ï¼‰å’Œå¡«ç©ºå¡ï¼ˆå½“ä½ åœ¨åŒä¸€æ¡ç¬”è®°ä¸ŠæŒ–äº†å¥½å¤šä¸ªç©ºæ—¶ï¼‰ã€‚è¿™äº›å¡ç‰‡çš„å¤ä¹ æ—¥æœŸå¦‚æœéš”å¾—å¤ªè¿‘ï¼Œå¯èƒ½ä¼šç›¸äº’å¹²æ‰°æˆ–æé†’ï¼Œå…³è”å¡ç‰‡åˆ†æ•£å¯ä»¥è®©è¿™äº›å¡ç‰‡çš„å¤ä¹ æ—¥æœŸå°½å¯èƒ½é”™å¼€ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-aa5adaca683e7ec7ba67dccac91ecad9_r.jpg" data-original-token="v2-aa5adaca683e7ec7ba67dccac91ecad9" data-rawheight="912" data-rawwidth="1240" data-size="normal" src="https://pic2.zhimg.com/v2-aa5adaca683e7ec7ba67dccac91ecad9_1440w.jpg" width="1240"/></figure><h3>3.6 é«˜çº§æœç´¢</h3><p data-pid="EEOLBdNo">åœ¨å¡ç‰‡æµè§ˆå™¨ä¸­ï¼Œä½ å¯ä»¥å³é”®<b>è¡¨å¤´</b>ï¼Œç‚¹å‡» Difficultyã€Stabilityã€Retentionï¼Œè®©å¡ç‰‡æµè§ˆå™¨æ˜¾ç¤ºå¡ç‰‡å½“å‰çš„è®°å¿†çŠ¶æ€ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic4.zhimg.com/v2-b2b40c84f58f47fbb789c70635732d0f_r.jpg" data-original-token="v2-b2b40c84f58f47fbb789c70635732d0f" data-rawheight="1040" data-rawwidth="1658" data-size="normal" src="https://pic4.zhimg.com/v2-b2b40c84f58f47fbb789c70635732d0f_1440w.jpg" width="1658"/></figure><p data-pid="znJpI88g">åŒæ—¶æ”¯æŒä¸‰ç§å±æ€§çš„ç­›é€‰è¯­æ³•ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š</p><ul><li data-pid="ztDNLe_U">s&lt;10ï¼šè®°å¿†ç¨³å®šæ€§å°äº 10 å¤©çš„å¡ç‰‡</li><li data-pid="L4XvsP_r">d=5ï¼šéš¾åº¦ç­‰äº 5 çš„å¡ç‰‡</li><li data-pid="yR5vDoiq">r&lt;0.6ï¼šè®°å¿†å¯æå–æ€§ï¼ˆå›å¿†æ¦‚ç‡ï¼‰å°äº 60% çš„å¡ç‰‡</li></ul><h3>3.7 é«˜çº§ç»Ÿè®¡</h3><p data-pid="sFmOfz0M">æŒ‰ä½ Shift é”®ï¼ŒåŒæ—¶ç‚¹å‡»ã€Œç»Ÿè®¡ã€ï¼Œå³å¯è¿›å…¥æ—§ç‰ˆçš„ Anki ç»Ÿè®¡ç•Œé¢ã€‚</p><figure data-size="normal"><img class="origin_image zh-lightbox-thumb" data-caption="" data-original="https://pic2.zhimg.com/v2-104195778e6f53473d487dbe9dbfc28f_r.jpg" data-original-token="v2-104195778e6f53473d487dbe9dbfc28f" data-rawheight="1300" data-rawwidth="1500" data-size="normal" src="https://pic2.zhimg.com/v2-104195778e6f53473d487dbe9dbfc28f_1440w.jpg" width="1500"/></figure><p data-pid="DgyNtDhf">Average retentionï¼Œå³å¹³å‡ä¿ç•™ç‡ï¼Œåæ˜ äº†ä½ ç›®å‰æ‰€æœ‰å¤ä¹ è¿‡çš„å¡ç‰‡è¿˜è®°å¾—çš„ç™¾åˆ†æ¯”ã€‚</p><p data-pid="34wdUk0u">Average stabilityï¼Œå³å¹³å‡è®°å¿†ç¨³å®šæ€§ï¼Œåæ˜ äº†ä½ ç›®å‰æ‰€æœ‰å¤ä¹ è¿‡çš„å¡ç‰‡çš„é—å¿˜é€Ÿç‡ã€‚ç¨³å®šæ€§è¶Šå¤§ï¼Œé—å¿˜é€Ÿç‡è¶Šæ…¢ã€‚</p><hr/><p data-pid="tUBcDEPv">ä»¥ä¸Šå°±æ˜¯ FSRS4Anki çš„å®Œæ•´é£Ÿç”¨æŒ‡å—äº†ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœæˆ‘çš„å·¥ä½œå¯¹ä½ çš„å­¦ä¹ æœ‰ç›Šï¼Œè¿˜æ³è¯·ç»™æˆ‘çš„å¼€æºé¡¹ç›® starï¼Œç»™æ’ä»¶é¡µé¢ç‚¹èµã€‚</p><a class="wrap external" data-draft-node="block" data-draft-type="link-card" data-image="https://pica.zhimg.com/v2-040f8f3f57d5cb781faeec3ad2af9ad2_qhd.jpg" data-image-height="600" data-image-width="1200" href="https://github.com/open-spaced-repetition/fsrs4anki" rel="nofollow noreferrer noopener" target="_blank">GitHub - open-spaced-repetition/fsrs4anki: A modern Anki custom scheduling based on free spaced repetition scheduler algorithm</a><a class="wrap external" data-draft-node="block" data-draft-type="link-card" href="https://ankiweb.net/shared/info/759844606" rel="nofollow noreferrer noopener" target="_blank">FSRS4Anki Helper - AnkiWeb</a><p></p>

<hr>
<div class="column" style="margin: 1em 0; padding: 0.5em 1em; border: 2px solid #999; border-radius: 5px;" data-pagefind-ignore>
<h2>ä¸“æ ï¼šAnkiXé«˜è€ƒ</h2>
<p>å›´ç»•ã€ŒAnkiã€å’Œé«˜è€ƒå¤‡è€ƒï¼Œé¢å‘å¹¿å¤§é«˜ä¸­ç”Ÿï¼Œäº¤æµä½œè€…ä»¬å¯¹ã€ŒAnkiã€å’Œé«˜è€ƒçš„è®¤è¯†ä¸è§è§£ï¼Œåˆ†äº«åŒå­¦ä»¬æ•´ç†çš„é«˜ä¸­çŸ¥è¯†ç‰Œç»„ï¼Œå¸¦æ¯ä¸ªè€ƒç”Ÿé«˜æ•ˆå­¦ä¹ ï¼</p>
</div>
<hr>
<p data-pagefind-ignore><a href="./">â† è¿”å›ç›®å½•</a></p>
</article>
<footer>
<p style="color: #999; font-size: 0.85em; text-align: center; margin-top: 2em;">
æœ¬é¡µé¢ç”± <a href="https://github.com/L-M-Sherlock/ZhiHuArchive" target="_blank" rel="noopener noreferrer">ZhiHuArchive</a> æ¸²æŸ“ï¼Œæ¨¡æ¿å‚è€ƒ <a href="https://github.com/frostming/fxzhihu" target="_blank" rel="noopener noreferrer">FxZhihu</a>ã€‚
</p>
</footer>
<script src="https://giscus.app/client.js"
data-repo="L-M-Sherlock/ZhiHuArchive"
data-repo-id="MDEwOlJlcG9zaXRvcnkzNDk5NDE0MzM="
data-category="Announcements"
data-category-id="DIC_kwDOFNuuuc4Ck92x"
data-mapping="title"
data-strict="0"
data-reactions-enabled="1"
data-emit-metadata="0"
data-input-position="top"
data-theme="preferred_color_scheme"
data-lang="zh-CN"
data-loading="lazy"
crossorigin="anonymous"
async>
</script>
</body>
</html>