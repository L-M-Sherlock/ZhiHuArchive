{
  "allow_segment_interaction": 1,
  "answer_type": "normal",
  "author": {
    "avatar_url": "https://pic1.zhimg.com/v2-d571786b77078321f5f6ef92f4967877_l.jpg?source=2c26e567",
    "avatar_url_template": "https://picx.zhimg.com/v2-d571786b77078321f5f6ef92f4967877.jpg?source=2c26e567",
    "badge": [
      {
        "description": "信息技术行业 算法工程师",
        "topics": [],
        "type": "identity"
      }
    ],
    "badge_v2": {
      "detail_badges": [
        {
          "badge_status": "passed",
          "description": "知势榜教育校园领域影响力榜答主",
          "detail_type": "super_activity",
          "icon": "https://picx.zhimg.com/v2-4a07bc69c4bb04444721f35b32125c75_l.png?source=32738c0c",
          "night_icon": "https://pica.zhimg.com/v2-4a07bc69c4bb04444721f35b32125c75_l.png?source=32738c0c",
          "sources": [
            {
              "avatar_path": "",
              "avatar_url": "",
              "description": "",
              "id": "27",
              "name": "知势榜8月",
              "priority": 27,
              "token": "",
              "type": "content_potential_category",
              "url": ""
            }
          ],
          "title": "社区成就",
          "type": "reward",
          "url": ""
        },
        {
          "badge_status": "passed",
          "description": "信息技术行业 算法工程师",
          "detail_type": "identity_people",
          "icon": "https://picx.zhimg.com/v2-2ddc5cc683982648f6f123616fb4ec09_l.png?source=32738c0c",
          "night_icon": "https://picx.zhimg.com/v2-2ddc5cc683982648f6f123616fb4ec09_l.png?source=32738c0c",
          "sources": [],
          "title": "已认证的个人",
          "type": "identity",
          "url": "https://zhuanlan.zhihu.com/p/96956163"
        }
      ],
      "icon": "https://picx.zhimg.com/v2-27bfcba90e66db79ce8768ab807e017e_l.png?source=32738c0c",
      "merged_badges": [
        {
          "badge_status": "passed",
          "description": "知势榜教育校园领域影响力榜答主",
          "detail_type": "best",
          "icon": "",
          "night_icon": "",
          "sources": [],
          "title": "社区成就",
          "type": "best",
          "url": ""
        },
        {
          "badge_status": "passed",
          "description": "信息技术行业 算法工程师",
          "detail_type": "identity_people",
          "icon": "",
          "night_icon": "",
          "sources": [],
          "title": "认证",
          "type": "identity",
          "url": "https://zhuanlan.zhihu.com/p/96956163"
        }
      ],
      "night_icon": "https://picx.zhimg.com/v2-27bfcba90e66db79ce8768ab807e017e_l.png?source=32738c0c",
      "title": "知势榜教育校园领域影响力榜答主"
    },
    "gender": -1,
    "headline": "学校≠教育≠技能；文凭溢价=80%信号传递+20%人力资本",
    "id": "4c592f496dc33822b560b382907ff1d0",
    "is_advertiser": false,
    "is_org": false,
    "is_privacy": false,
    "name": "Thoughts Memo",
    "type": "people",
    "url": "https://www.zhihu.com/api/v4/people/4c592f496dc33822b560b382907ff1d0",
    "url_token": "L.M.Sherlock",
    "user_type": "people"
  },
  "biz_ext": {
    "share_guide": {
      "has_positive_bubble": false,
      "has_time_bubble": false,
      "hit_share_guide_cluster": false
    }
  },
  "comment_count": 13,
  "content": "<p data-pid=\"_47TT-ZI\">不论是取整，还是四舍五入，都有个近似的方法，写个函数：</p><div class=\"highlight\"><pre><code class=\"language-python3\"><span class=\"k\">def</span> <span class=\"nf\">sin_round</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">x</span> <span class=\"o\">-</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">sin</span><span class=\"p\">(</span><span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">pi</span> <span class=\"o\">*</span> <span class=\"n\">x</span><span class=\"p\">)</span> <span class=\"o\">/</span> <span class=\"p\">(</span><span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">pi</span><span class=\"p\">)</span></code></pre></div><p data-pid=\"0cFUNJY9\">这个函数的图像如下：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/50/v2-155d35d8228c7b9233a1c3aec74cabc6_720w.jpg?source=2c26e567\" data-rawwidth=\"638\" data-rawheight=\"637\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-155d35d8228c7b9233a1c3aec74cabc6\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-8e7bbc5489e9bd25e3cb14022eee2507_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"638\" data-original=\"https://picx.zhimg.com/v2-155d35d8228c7b9233a1c3aec74cabc6_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;638&#39; height=&#39;637&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"638\" data-rawheight=\"637\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-155d35d8228c7b9233a1c3aec74cabc6\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-8e7bbc5489e9bd25e3cb14022eee2507_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"638\" data-original=\"https://picx.zhimg.com/v2-155d35d8228c7b9233a1c3aec74cabc6_r.jpg?source=2c26e567\" data-actualsrc=\"https://pic1.zhimg.com/50/v2-155d35d8228c7b9233a1c3aec74cabc6_720w.jpg?source=2c26e567\"/></figure><p data-pid=\"4j4k3H8x\">如果嫌套一层不够的话，可以多叠几次：</p><figure data-size=\"normal\"><noscript><img src=\"https://pica.zhimg.com/50/v2-111f10b8f4268f03f121d22133506544_720w.jpg?source=2c26e567\" data-rawwidth=\"1137\" data-rawheight=\"811\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-111f10b8f4268f03f121d22133506544\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-4db3ec2c8a36fc56e81cdf8ffb2b94da_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"1137\" data-original=\"https://picx.zhimg.com/v2-111f10b8f4268f03f121d22133506544_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1137&#39; height=&#39;811&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1137\" data-rawheight=\"811\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-111f10b8f4268f03f121d22133506544\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-4db3ec2c8a36fc56e81cdf8ffb2b94da_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1137\" data-original=\"https://picx.zhimg.com/v2-111f10b8f4268f03f121d22133506544_r.jpg?source=2c26e567\" data-actualsrc=\"https://pica.zhimg.com/50/v2-111f10b8f4268f03f121d22133506544_720w.jpg?source=2c26e567\"/></figure><p data-pid=\"ZCD4gwu4\">这个是近似四舍五入。要向下取整，就平移一下：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/50/v2-563f6f73212f237b34d7b613d63f0f94_720w.jpg?source=2c26e567\" data-rawwidth=\"1100\" data-rawheight=\"732\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-563f6f73212f237b34d7b613d63f0f94\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-7be0cef705a8ca06fc3455e106ea1294_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"1100\" data-original=\"https://picx.zhimg.com/v2-563f6f73212f237b34d7b613d63f0f94_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1100&#39; height=&#39;732&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1100\" data-rawheight=\"732\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-563f6f73212f237b34d7b613d63f0f94\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-7be0cef705a8ca06fc3455e106ea1294_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1100\" data-original=\"https://picx.zhimg.com/v2-563f6f73212f237b34d7b613d63f0f94_r.jpg?source=2c26e567\" data-actualsrc=\"https://pic1.zhimg.com/50/v2-563f6f73212f237b34d7b613d63f0f94_720w.jpg?source=2c26e567\"/></figure><p data-pid=\"QD6MXCzU\">并且因为用的 <code>sin</code> 函数是可导的，所以操作完梯度都是有的。</p>",
  "content_need_truncated": false,
  "created_time": 1682394962,
  "excerpt": "不论是取整，还是四舍五入，都有个近似的方法，写个函数： def sin_round(x): return x - torch.sin(2 * np.pi * x) / (2 * np.pi)这个函数的图像如下： [图片] 如果嫌套一层不够的话，可以多叠几次： [图片] 这个是近似四舍五入。要向下取整，就平移一下： [图片] 并且因为用的 sin 函数是可导的，所以操作完梯度都是有的。",
  "extras": "",
  "force_login_when_click_read_more": false,
  "id": "2999895083",
  "is_collapsed": false,
  "is_contain_ai_content": false,
  "is_copyable": true,
  "is_jump_native": false,
  "podcast_audio_enter": {
    "action_url": "zhihu://podcast/audio_player/0?contentId=2999895083&contentType=answer&subType=&entrance=detail_page",
    "sub_type": "",
    "text": "听内容",
    "text_color": "MapBrand",
    "text_size": 13
  },
  "question": {
    "created": 1602214114,
    "detail": "",
    "id": "424790820",
    "question_type": "normal",
    "relationship": {},
    "title": "pytorch中如何对tensor进行取整操作且梯度不变为0?",
    "type": "question",
    "updated_time": 1607230189,
    "url": "https://www.zhihu.com/api/v4/questions/424790820"
  },
  "relationship": {
    "upvoted_followees": []
  },
  "type": "answer",
  "updated_time": 1682394962,
  "url": "https://www.zhihu.com/api/v4/answers/2999895083",
  "voteup_count": 46
}