{
  "allow_segment_interaction": 1,
  "answer_type": "normal",
  "author": {
    "avatar_url": "https://picx.zhimg.com/v2-d571786b77078321f5f6ef92f4967877_l.jpg?source=2c26e567",
    "avatar_url_template": "https://picx.zhimg.com/v2-d571786b77078321f5f6ef92f4967877.jpg?source=2c26e567",
    "badge": [
      {
        "description": "信息技术行业 算法工程师",
        "topics": [],
        "type": "identity"
      }
    ],
    "badge_v2": {
      "detail_badges": [
        {
          "badge_status": "passed",
          "description": "知势榜教育校园领域影响力榜答主",
          "detail_type": "super_activity",
          "icon": "https://picx.zhimg.com/v2-4a07bc69c4bb04444721f35b32125c75_l.png?source=32738c0c",
          "night_icon": "https://picx.zhimg.com/v2-4a07bc69c4bb04444721f35b32125c75_l.png?source=32738c0c",
          "sources": [
            {
              "avatar_path": "",
              "avatar_url": "",
              "description": "",
              "id": "27",
              "name": "知势榜8月",
              "priority": 27,
              "token": "",
              "type": "content_potential_category",
              "url": ""
            }
          ],
          "title": "社区成就",
          "type": "reward",
          "url": ""
        },
        {
          "badge_status": "passed",
          "description": "信息技术行业 算法工程师",
          "detail_type": "identity_people",
          "icon": "https://picx.zhimg.com/v2-2ddc5cc683982648f6f123616fb4ec09_l.png?source=32738c0c",
          "night_icon": "https://pic1.zhimg.com/v2-2ddc5cc683982648f6f123616fb4ec09_l.png?source=32738c0c",
          "sources": [],
          "title": "已认证的个人",
          "type": "identity",
          "url": "https://zhuanlan.zhihu.com/p/96956163"
        }
      ],
      "icon": "https://picx.zhimg.com/v2-27bfcba90e66db79ce8768ab807e017e_l.png?source=32738c0c",
      "merged_badges": [
        {
          "badge_status": "passed",
          "description": "知势榜教育校园领域影响力榜答主",
          "detail_type": "best",
          "icon": "",
          "night_icon": "",
          "sources": [],
          "title": "社区成就",
          "type": "best",
          "url": ""
        },
        {
          "badge_status": "passed",
          "description": "信息技术行业 算法工程师",
          "detail_type": "identity_people",
          "icon": "",
          "night_icon": "",
          "sources": [],
          "title": "认证",
          "type": "identity",
          "url": "https://zhuanlan.zhihu.com/p/96956163"
        }
      ],
      "night_icon": "https://picx.zhimg.com/v2-27bfcba90e66db79ce8768ab807e017e_l.png?source=32738c0c",
      "title": "知势榜教育校园领域影响力榜答主"
    },
    "gender": -1,
    "headline": "在Anki制作2.9万张卡片，复习33万次。Anki高考践行者、推广者。",
    "id": "4c592f496dc33822b560b382907ff1d0",
    "is_advertiser": false,
    "is_org": false,
    "is_privacy": false,
    "name": "Thoughts Memo",
    "type": "people",
    "url": "https://www.zhihu.com/api/v4/people/4c592f496dc33822b560b382907ff1d0",
    "url_token": "L.M.Sherlock",
    "user_type": "people"
  },
  "biz_ext": {
    "share_guide": {
      "has_positive_bubble": false,
      "has_time_bubble": false,
      "hit_share_guide_cluster": false
    }
  },
  "comment_count": 4,
  "content": "<p data-pid=\"0vEApRlZ\">Anki 代码是开源的，题主学计算机的可以自己看一下哦[滑稽]</p><p data-pid=\"ozr0PDSe\">代码如下</p><div class=\"highlight\"><pre><code class=\"language-python3\"><span class=\"c1\"># Packaged Anki decks</span>\n<span class=\"c1\">######################################################################</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">AnkiPackageExporter</span><span class=\"p\">(</span><span class=\"n\">AnkiExporter</span><span class=\"p\">):</span>\n\n    <span class=\"n\">key</span> <span class=\"o\">=</span> <span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">&#34;Anki Deck Package&#34;</span><span class=\"p\">)</span>\n    <span class=\"n\">ext</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;.apkg&#34;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">col</span><span class=\"p\">:</span> <span class=\"n\">Collection</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">AnkiExporter</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">col</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">exportInto</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"c1\"># open a zip file</span>\n        <span class=\"n\">z</span> <span class=\"o\">=</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZipFile</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"s2\">&#34;w&#34;</span><span class=\"p\">,</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZIP_DEFLATED</span><span class=\"p\">,</span> <span class=\"n\">allowZip64</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n        <span class=\"n\">media</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">doExport</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">,</span> <span class=\"n\">path</span><span class=\"p\">)</span>\n        <span class=\"c1\"># media map</span>\n        <span class=\"n\">z</span><span class=\"o\">.</span><span class=\"n\">writestr</span><span class=\"p\">(</span><span class=\"s2\">&#34;media&#34;</span><span class=\"p\">,</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">media</span><span class=\"p\">))</span>\n        <span class=\"n\">z</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">doExport</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">z</span><span class=\"p\">:</span> <span class=\"n\">ZipFile</span><span class=\"p\">,</span> <span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">]:</span>  <span class=\"c1\"># type: ignore</span>\n        <span class=\"c1\"># export into the anki2 file</span>\n        <span class=\"n\">colfile</span> <span class=\"o\">=</span> <span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s2\">&#34;.apkg&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;.anki2&#34;</span><span class=\"p\">)</span>\n        <span class=\"n\">AnkiExporter</span><span class=\"o\">.</span><span class=\"n\">exportInto</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">colfile</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_v2sched</span><span class=\"p\">:</span>\n            <span class=\"n\">z</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">colfile</span><span class=\"p\">,</span> <span class=\"s2\">&#34;collection.anki2&#34;</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"c1\"># prevent older clients from accessing</span>\n            <span class=\"c1\"># pylint: disable=unreachable</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_addDummyCollection</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">)</span>\n            <span class=\"n\">z</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">colfile</span><span class=\"p\">,</span> <span class=\"s2\">&#34;collection.anki21&#34;</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># and media</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">prepareMedia</span><span class=\"p\">()</span>\n        <span class=\"n\">media</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_exportMedia</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">mediaFiles</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">mediaDir</span><span class=\"p\">)</span>\n        <span class=\"c1\"># tidy up intermediate files</span>\n        <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">unlink</span><span class=\"p\">(</span><span class=\"n\">colfile</span><span class=\"p\">)</span>\n        <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s2\">&#34;.apkg&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;.media.db2&#34;</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">exists</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">):</span>\n            <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">unlink</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">)</span>\n        <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">chdir</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">mediaDir</span><span class=\"p\">)</span>\n        <span class=\"n\">shutil</span><span class=\"o\">.</span><span class=\"n\">rmtree</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s2\">&#34;.apkg&#34;</span><span class=\"p\">,</span> <span class=\"s2\">&#34;.media&#34;</span><span class=\"p\">))</span>\n        <span class=\"k\">return</span> <span class=\"n\">media</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">_exportMedia</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">z</span><span class=\"p\">:</span> <span class=\"n\">ZipFile</span><span class=\"p\">,</span> <span class=\"n\">files</span><span class=\"p\">:</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">],</span> <span class=\"n\">fdir</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">]:</span>\n        <span class=\"n\">media</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n        <span class=\"k\">for</span> <span class=\"n\">c</span><span class=\"p\">,</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">files</span><span class=\"p\">):</span>\n            <span class=\"n\">cStr</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span>\n            <span class=\"n\">mpath</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">fdir</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">isdir</span><span class=\"p\">(</span><span class=\"n\">mpath</span><span class=\"p\">):</span>\n                <span class=\"k\">continue</span>\n            <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">exists</span><span class=\"p\">(</span><span class=\"n\">mpath</span><span class=\"p\">):</span>\n                <span class=\"k\">if</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&#34;\\.svg$&#34;</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">,</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">IGNORECASE</span><span class=\"p\">):</span>\n                    <span class=\"n\">z</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">mpath</span><span class=\"p\">,</span> <span class=\"n\">cStr</span><span class=\"p\">,</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZIP_DEFLATED</span><span class=\"p\">)</span>\n                <span class=\"k\">else</span><span class=\"p\">:</span>\n                    <span class=\"n\">z</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">mpath</span><span class=\"p\">,</span> <span class=\"n\">cStr</span><span class=\"p\">,</span> <span class=\"n\">zipfile</span><span class=\"o\">.</span><span class=\"n\">ZIP_STORED</span><span class=\"p\">)</span>\n                <span class=\"n\">media</span><span class=\"p\">[</span><span class=\"n\">cStr</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">unicodedata</span><span class=\"o\">.</span><span class=\"n\">normalize</span><span class=\"p\">(</span><span class=\"s2\">&#34;NFC&#34;</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">)</span>\n                <span class=\"n\">hooks</span><span class=\"o\">.</span><span class=\"n\">media_files_did_export</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">media</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">prepareMedia</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"c1\"># chance to move each file in self.mediaFiles into place before media</span>\n        <span class=\"c1\"># is zipped up</span>\n        <span class=\"k\">pass</span>\n\n    <span class=\"c1\"># create a dummy collection to ensure older clients don&#39;t try to read</span>\n    <span class=\"c1\"># data they don&#39;t understand</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_addDummyCollection</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"nb\">zip</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"n\">namedtmp</span><span class=\"p\">(</span><span class=\"s2\">&#34;dummy.anki2&#34;</span><span class=\"p\">)</span>\n        <span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">Collection</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n        <span class=\"n\">n</span> <span class=\"o\">=</span> <span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">newNote</span><span class=\"p\">()</span>\n        <span class=\"n\">n</span><span class=\"p\">[</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">&#34;Front&#34;</span><span class=\"p\">)]</span> <span class=\"o\">=</span> <span class=\"s2\">&#34;This file requires a newer version of Anki.&#34;</span>\n        <span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">addNote</span><span class=\"p\">(</span><span class=\"n\">n</span><span class=\"p\">)</span>\n        <span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n        <span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">(</span><span class=\"n\">downgrade</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n        <span class=\"nb\">zip</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"s2\">&#34;collection.anki2&#34;</span><span class=\"p\">)</span>\n        <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">unlink</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span></code></pre></div><p data-pid=\"-GzNdiqU\">分析代码我们就能看出，其实 apkg 文件是一个压缩包，里面有关于卡片信息的数据库和媒体文件。</p><p data-pid=\"j2WUyasm\">我们用 7z 来打开一下 .apkg 文件：</p><figure data-size=\"normal\"><noscript><img src=\"https://picx.zhimg.com/50/v2-b0373c553398a61da5f7fef706b94ee2_720w.jpg?source=2c26e567\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1417\" data-rawheight=\"283\" data-original-token=\"v2-b0373c553398a61da5f7fef706b94ee2\" data-default-watermark-src=\"https://pic1.zhimg.com/50/v2-be1eec9a4f41d79e65787fa79cdb52ff_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"1417\" data-original=\"https://picx.zhimg.com/v2-b0373c553398a61da5f7fef706b94ee2_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1417&#39; height=&#39;283&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1417\" data-rawheight=\"283\" data-original-token=\"v2-b0373c553398a61da5f7fef706b94ee2\" data-default-watermark-src=\"https://pic1.zhimg.com/50/v2-be1eec9a4f41d79e65787fa79cdb52ff_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1417\" data-original=\"https://picx.zhimg.com/v2-b0373c553398a61da5f7fef706b94ee2_r.jpg?source=2c26e567\" data-actualsrc=\"https://picx.zhimg.com/50/v2-b0373c553398a61da5f7fef706b94ee2_720w.jpg?source=2c26e567\"/></figure><p data-pid=\"7CaSAaWI\">其中，.anki2 的文件就是一个 SQLite 数据库，我们可以用 DB Browser for SQLite 打开看看：</p><figure data-size=\"normal\"><noscript><img src=\"https://picx.zhimg.com/50/v2-6bfb01135d694a69aecdf9685f032074_720w.jpg?source=2c26e567\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1019\" data-rawheight=\"625\" data-original-token=\"v2-6bfb01135d694a69aecdf9685f032074\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-55ed434a0de4616bda12f62850bed903_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"1019\" data-original=\"https://picx.zhimg.com/v2-6bfb01135d694a69aecdf9685f032074_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1019&#39; height=&#39;625&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1019\" data-rawheight=\"625\" data-original-token=\"v2-6bfb01135d694a69aecdf9685f032074\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-55ed434a0de4616bda12f62850bed903_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1019\" data-original=\"https://picx.zhimg.com/v2-6bfb01135d694a69aecdf9685f032074_r.jpg?source=2c26e567\" data-actualsrc=\"https://picx.zhimg.com/50/v2-6bfb01135d694a69aecdf9685f032074_720w.jpg?source=2c26e567\"/></figure><p data-pid=\"HE6YiCwB\">其中，cards 这个表就是卡片信息，notes 表是笔记信息：</p><figure data-size=\"normal\"><noscript><img src=\"https://picx.zhimg.com/50/v2-10db7d023ca2ce1ae045a2f0d2fdb3aa_720w.jpg?source=2c26e567\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1499\" data-rawheight=\"568\" data-original-token=\"v2-10db7d023ca2ce1ae045a2f0d2fdb3aa\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-42220ce6e2f20a129f22f3e3449e7991_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"1499\" data-original=\"https://picx.zhimg.com/v2-10db7d023ca2ce1ae045a2f0d2fdb3aa_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1499&#39; height=&#39;568&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1499\" data-rawheight=\"568\" data-original-token=\"v2-10db7d023ca2ce1ae045a2f0d2fdb3aa\" data-default-watermark-src=\"https://picx.zhimg.com/50/v2-42220ce6e2f20a129f22f3e3449e7991_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1499\" data-original=\"https://picx.zhimg.com/v2-10db7d023ca2ce1ae045a2f0d2fdb3aa_r.jpg?source=2c26e567\" data-actualsrc=\"https://picx.zhimg.com/50/v2-10db7d023ca2ce1ae045a2f0d2fdb3aa_720w.jpg?source=2c26e567\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://picx.zhimg.com/50/v2-b3e04cca1e5806559be9235e256d1d08_720w.jpg?source=2c26e567\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1074\" data-rawheight=\"519\" data-original-token=\"v2-b3e04cca1e5806559be9235e256d1d08\" data-default-watermark-src=\"https://pic1.zhimg.com/50/v2-85442904f24e0b52e78a908e3638d681_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb\" width=\"1074\" data-original=\"https://picx.zhimg.com/v2-b3e04cca1e5806559be9235e256d1d08_r.jpg?source=2c26e567\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1074&#39; height=&#39;519&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1074\" data-rawheight=\"519\" data-original-token=\"v2-b3e04cca1e5806559be9235e256d1d08\" data-default-watermark-src=\"https://pic1.zhimg.com/50/v2-85442904f24e0b52e78a908e3638d681_720w.jpg?source=2c26e567\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1074\" data-original=\"https://picx.zhimg.com/v2-b3e04cca1e5806559be9235e256d1d08_r.jpg?source=2c26e567\" data-actualsrc=\"https://picx.zhimg.com/50/v2-b3e04cca1e5806559be9235e256d1d08_720w.jpg?source=2c26e567\"/></figure><p data-pid=\"TaOw1Re7\">然后我们回归正题，如何不用 Anki 创建 apkg 格式的牌组呢？</p><p data-pid=\"XZhyMae3\">首先需要创建一个和 Anki2 格式相对应的 SQLite 的数据库，然后用 zip 格式压缩，最后把后缀改成 apkg 即可。</p><p data-pid=\"G2L3v-Cl\">（当然，这是比较笼统的说法，具体做法请研究 Anki 的源码。</p><p data-pid=\"2rH-TBn9\">2020/8/4 更新：</p><a href=\"https://link.zhihu.com/?target=https%3A//github.com/ankidroid/Anki-Android/wiki/Database-Structure\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/ankidroid/An</span><span class=\"invisible\">ki-Android/wiki/Database-Structure</span><span class=\"ellipsis\"></span></a><p data-pid=\"YyfZ26JI\">最近在研究 Anki 学习数据，这个数据库的文档帮大忙了。 <a class=\"member_mention\" href=\"https://www.zhihu.com/people/9738c822b4f758fd6162b6f97622fa42\" data-hash=\"9738c822b4f758fd6162b6f97622fa42\" data-hovercard=\"p$b$9738c822b4f758fd6162b6f97622fa42\">@小石子</a> 感兴趣可以来看一下。</p>",
  "content_need_truncated": false,
  "created_time": 1596264472,
  "excerpt": "Anki 代码是开源的，题主学计算机的可以自己看一下哦[滑稽] 代码如下 # Packaged Anki decks ###################################################################### class AnkiPackageExporter(AnkiExporter): key = lambda: _(&#34;Anki Deck Package&#34;) ext = &#34;.apkg&#34; def __init__(self, col: Collection) -&gt; None: AnkiExporter.__init__(self, col) def exportInto(self, path: str) -&gt; None: # open a zip file z = zipfile…",
  "extras": "",
  "force_login_when_click_read_more": false,
  "id": "1376071771",
  "is_collapsed": false,
  "is_contain_ai_content": false,
  "is_copyable": true,
  "is_jump_native": false,
  "podcast_audio_enter": {
    "action_url": "zhihu://podcast/audio_player/0?contentId=1376071771&contentType=answer&subType=&entrance=detail_page",
    "sub_type": "",
    "text": "听内容",
    "text_color": "MapBrand",
    "text_size": 13
  },
  "question": {
    "created": 1596258622,
    "detail": "<p>IOS/Mac有MarginNote，Windows有BookxNote他们都支持将笔记导出为apkg格式，他们是如何实现的呢？</p>",
    "id": "411324785",
    "question_type": "normal",
    "relationship": {},
    "title": "如何不使用Anki创建apkg格式牌组?",
    "type": "question",
    "updated_time": 1596258622,
    "url": "https://www.zhihu.com/api/v4/questions/411324785"
  },
  "relationship": {
    "upvoted_followees": []
  },
  "type": "answer",
  "updated_time": 1596509890,
  "url": "https://www.zhihu.com/api/v4/answers/1376071771",
  "voteup_count": 27
}